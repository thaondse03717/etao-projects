<!DOCTYPE html>
<head>
	<title>Options - Etao Auction Offline Assistant</title>
	<link type="text/css" rel="stylesheet" href="css/style.css" />
	<script type="text/javascript" src="js/jquery.1.6.2.min.js"></script>
	<script type="text/javascript" src="js/assistant.js"></script>
</head>
<body>

<script type="text/javascript">
jQuery(document).ready(function () {

	jQuery('#submit').click(saveOptions);
	jQuery('#restore').click(restoreOptions);
	jQuery('#toggle').click(function () {
		$('#advanced').toggle();
	});

	getOptions();

	function saveOptions(internal) {
		_saveOptions();
		assistant.notify('Options Saved', 'success');
	}

	function restoreOptions() {
		_renderOptions(assistant.defaults);
		_saveOptions();
		assistant.notify('Default Options Restored', 'success');
	}

	function getOptions() {
		_renderOptions(assistant.getOptions());
	}

	function _saveOptions() {
		assistant.setOption('selector_entry', jQuery('#selector_entry').attr('value'));
		assistant.setOption('selector_link', jQuery('#selector_link').attr('value'));
		assistant.setOption('server_url', jQuery('#server_url').attr('value'));

		assistant.setOption('auto_extract', jQuery('#auto_extract')[0].checked);
		assistant.setOption('auto_memo', jQuery('#auto_memo')[0].checked);
		assistant.setOption('auto_close', jQuery('#auto_close')[0].checked);

		//console.log('#auto_extract: ' + jQuery('#auto_extract')[0].checked);
		//console.log('#auto_memo: ' + jQuery('#auto_memo')[0].checked);
	}

	function _renderOptions(options) {
		console.log(assistant.defaults);

		jQuery('#selector_entry').attr('value', options.selector_entry);
		jQuery('#selector_link').attr('value', options.selector_link);
		jQuery('#server_url').attr('value', options.server_url);

		if (options.auto_extract === 'true') {
			jQuery('#auto_extract').attr('checked', 'checked');
		}

		if (options.auto_memo === 'true') {
			jQuery('#auto_memo').attr('checked', 'checked');
		}

		if (options.auto_close === 'true') {
			jQuery('#auto_close').attr('checked', 'checked');
		}

		//console.log('auto_memo: ' + options.auto_extract);
		//console.log('auto_extract: ' + options.auto_memo);
	}

});
</script>

<div class="options main">

	<h1>Config Auction Offline Assistant</h1>

	<div class="input">
		<label>Server URI</label>
		<input type="text" id="server_url" name="server_url" class="text" />
	</div>

	<div id="advanced" style="display:none;">
		<div class="input">
			<label>Item Selector</label>
			<input type="text" id="selector_entry" name="selector_entry" class="text" />
		</div>

		<div class="input">
			<label>Link Selector</label>
			<input type="text" id="selector_link" name="selector_link" class="text" />
		</div>
	</div>

	<div class="input">
		<label>&nbsp;</label>
		<input type="checkbox" name="auto_extract" id="auto_extract" value="1" />
		<label for="auto_extract" class="inline">extract selected auctions after opening the assistant?</label>
	</div>

	<div class="input">
		<label>&nbsp;</label>
		<input type="checkbox" name="auto_memo" id="auto_memo" value="1" />
		<label for="auto_memo" class="inline">remember & recall the offline reason from last operation?</label>
	</div>

	<div class="input">
		<label>&nbsp;</label>
		<input type="checkbox" name="auto_close" id="auto_close" value="1" />
		<label for="auto_close" class="inline">close the auction offline assistant page after proccess complete?</label>
	</div>

	<div class="input" style="margin-top: 1em;">
		<label>&nbsp;</label>
		<a href="javascript:void(0)" id="submit" class="button current" style="margin-right: 1em;">Save Options</a>
		<a href="javascript:void(0)" id="restore" class="button" style="margin-right: 1em;">Restore Defaults</a>
		<a href="javascript:void(0)" id="toggle" class="button">Advanced Options</a>
	</div>

	<p class="footer">Auction Offline Assistant v1.1 by <a href="mailto:wangshijun2010@gmail.com">wangshijun2010@gmail.com</a></p>

</div>

</body>
</html>