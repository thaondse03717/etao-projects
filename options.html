<!DOCTYPE html>
<head>
	<title>偏好设置 - 宝贝下线助手</title>
	<link type="text/css" rel="stylesheet" href="css/style.css" />
	<script type="text/javascript" src="js/jquery.1.6.2.min.js"></script>
	<script type="text/javascript" src="js/assistant.js"></script>
</head>
<body>

<script type="text/javascript">
jQuery(document).ready(function () {

	jQuery('#submit').click(saveOptions);
	jQuery('#restore').click(restoreOptions);
	getOptions();

	function saveOptions(internal) {
		_saveOptions();
		assistant.notify('自定义设置已经保存', 'success');
	}

	function restoreOptions() {
		_renderOptions(assistant.defaults);
		_saveOptions();
		assistant.notify('已经恢复到工具默认的设置', 'success');
	}

	function getOptions() {
		_renderOptions(assistant.getOptions());
	}

	function _saveOptions() {
		assistant.setOption('selector_entry', jQuery('#selector_entry').attr('value'));
		assistant.setOption('selector_link', jQuery('#selector_link').attr('value'));
		assistant.setOption('server_url', jQuery('#server_url').attr('value'));

		assistant.setOption('auto_extract', jQuery('#auto_extract')[0].checked);
		assistant.setOption('auto_memo', jQuery('#auto_memo')[0].checked);

		//console.log('#auto_extract: ' + jQuery('#auto_extract')[0].checked);
		//console.log('#auto_memo: ' + jQuery('#auto_memo')[0].checked);
	}

	function _renderOptions(options) {
		console.log(assistant.defaults);

		jQuery('#selector_entry').attr('value', options.selector_entry);
		jQuery('#selector_link').attr('value', options.selector_link);
		jQuery('#server_url').attr('value', options.server_url);

		if (options.auto_extract === 'true') {
			jQuery('#auto_extract').attr('checked', 'checked');
		}

		if (options.auto_memo === 'true') {
			jQuery('#auto_memo').attr('checked', 'checked');
		}

		//console.log('auto_memo: ' + options.auto_extract);
		//console.log('auto_extract: ' + options.auto_memo);
	}

});
</script>

<div class="options main">

	<fieldset>
		<legend>配置宝贝下架助手</legend>
		<div class="input">
			<label>商品选择器</label>
			<input type="text" id="selector_entry" name="selector_entry" class="text" />
		</div>

		<div class="input">
			<label>连接选择器</label>
			<input type="text" id="selector_link" name="selector_link" class="text" />
		</div>

		<div class="input">
			<label>服务器地址</label>
			<input type="text" id="server_url" name="server_url" class="text" />
		</div>

		<div class="input">
			<label>其他选项</label>
			<input type="checkbox" name="auto_extract" id="auto_extract" value="1" />
			<label for="auto_extract" class="inline">打开宝贝下架助手时自动抽取NID?</label>
		</div>

		<div class="input">
			<label>&nbsp;</label>
			<input type="checkbox" name="auto_memo" id="auto_memo" value="1" />
			<label for="auto_memo" class="inline">记住上次操作时填写的下架原因?</label>
		</div>

		<div class="input" style="margin-top: 1em;">
			<label>&nbsp;</label>
			<a href="javascript:void(0)" id="submit" class="button" style="margin-right: 1em;">保存选项</a>
			<a href="javascript:void(0)" id="restore" class="button current">恢复默认</a>
		</div>

	</fieldset>

	<p class="footer">宝贝下架助手 v1.0 by <a href="mailto:wangshijun2010@gmail.com">wangshijun2010@gmail.com</a></p>

</div>

</body>
</html>