
var InfoBar=function(){return{interval:0,duration:5,init:function(){chrome.extension.sendRequest({'message':'isInfoBarHidden'},function(response){if(response.infoBarHidden!==true){$('body').prepend(InfoBar.getInfoBarHTML());$('#StayFocusd-infobar-hide').click(function(){InfoBar.hide();});$('#StayFocusd-infobar-never-show').click(function(){InfoBar.hide();chrome.extension.sendRequest({'message':'hideInfoBar'});});}else{InfoBar.isInfoBarHidden=true;}});},show:function(msgType){chrome.extension.sendRequest({'message':'isInfoBarHidden'},function(response){if(response.infoBarHidden!==true){$('#StayFocusd-infobar-msg').html(InfoBar.getMessage(msgType));$('#StayFocusd-infobar').css('color','#ffffff');$('#StayFocusd-infobar').slideDown('fast');}});},hide:function(){chrome.extension.sendRequest({'message':'isInfoBarHidden'},function(response){if(response.infoBarHidden!==true){$('#StayFocusd-infobar').slideUp('fast');}});},getMessage:function(msgType){switch(msgType){case'BLOCKED_BY_REFERRER':return'You reached this page via a blocked site, so the time you spend here is being deducted from your Max Allowed Time.';break;}},getInfoBarHTML:function(){var html='<div id="StayFocusd-infobar" style="display:none;">';html+='<img src="'+chrome.extension.getURL('img/eye_19x19_red.png')+'" />';html+='<span id="StayFocusd-infobar-msg"></span>';html+='<span id="StayFocusd-infobar-links">';html+='<a href="#" id="StayFocusd-infobar-never-show">hide forever</a>&#160;&#160;|&#160;&#160;';html+='<a href="#" id="StayFocusd-infobar-hide">hide once</a>';html+='</span>';html+='</div>';return html;},handleBackgroundScriptRequest:function(request,sender){var response=null;switch(request.message){case"show":response={'success':InfoBar.show(request.msgType)};break;case"hide":response={'success':InfoBar.hide()};break;}
return response;}}}();