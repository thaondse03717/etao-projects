(function(){var a=function(){for(var a=[],c=0;c<=15;c++)for(var e=c.toString(16)+c.toString(16),d=0;d<=15;d++)for(var f=d.toString(16)+d.toString(16),g=0;g<=15;g++){var i=g.toString(16)+g.toString(16);e==f&&f==i||a.push(parseInt("0x"+e+f+i))}return a}();DeltaSwatch=function(){this.type="similar";this.update=function(b){b||(b=Color.Space(colorPicker.RGB.values,"RGB>HEX>STRING"));var c=document.getElementById("deltaBox");removeChildNodes(c);var e=function(h){if(this.className&&Event.coords(h).y>220)this.style.left=
"",this.style.top="";else{var a=this.paletteHEX;window.setTimeout(function(){var h=Color.Space(a,"STRING>HEX>RGB");colorPicker.update("RGB",h);creator.animateBackground(colorPicker.RGB.values,2,colorPalette.max!=1);colorPalette.redraw({RGB:!0})},0)}};if(this.type=="harmony")for(var d=Color.Space(b,"STRING>HEX>RGB>HSV"),f="analogous,complement,split_complement,monochrome,triad,tetrad,compound".split(","),g=0,i=f.length;g<i;g++){var j=f[g],k=Color.Harmony[j](d),b=document.createElement("span");b.style.cssText=
"display: block; color: #fff; font-size: 14px; margin: 4px 0 7px; padding-left: 5px; padding-bottom: 1px";b.innerHTML=j.replace("_"," ").ucwords();c.appendChild(b);for(var l=0,h=k.length;l<h;l++)b=Color.Space(k[l],"HSV>RGB>HEX>STRING"),j=document.createElement("div"),j.style.backgroundColor="#"+b,j.paletteHEX=b,j.onmousedown=creator.addColorDrop,j.onclick=e,b=document.createElement("div"),b.appendChild(j),c.appendChild(b);b=document.createElement("br");b.style.clear="both";c.appendChild(b)}else if(this.type==
"similar"){g=Color.Space(b||"D0095D","STRING>HEX>RGB>XYZ>Lab");d=[];for(j in a)f=Color.Space(a[j],"HEX>RGB>XYZ>Lab"),f=Color.Delta.E94(f,g),d.push({name:a[j],value:f});d.sort(function(h,a){return h.value-a.value});for(g=0;g<140;g++){if(!d[g])break;j=document.createElement("div");b=Color.Space.HEX_STRING(d[g].name);j.style.backgroundColor="#"+b;j.paletteHEX=b;j.onmousedown=creator.addColorDrop;j.onclick=e;b=document.createElement("div");b.appendChild(j);c.appendChild(b)}}};return this}})();
window.Color||(Color={});
Color.Palette=function(a){var b=Color.Space.RGB_W3RGBA,c=document.getElementById("palette"),e=document.createElement("div");e.style.cssText="width: 100%;";c.appendChild(e);var d=document.createElement("canvas"),f=d.getContext("2d");d.width=c.offsetWidth;d.height=c.offsetHeight;c.appendChild(d);var g=this;this.canvas=d;this.ctx=f;this.points=[];this.selectedPoint=-1;this.max=a.max?a.max:21;this.min=a.min?a.min:0;this.getLast=function(){var a=this.points;return clone(a[a.length-1].color)};this.toString=
function(){function a(h){return Math.round(h*1E7)/1E7}var c=this.points,b="",d=0,h;for(h in c){var e=c[h],f=a(e._width);d+=f;$vars.type==="gradient"?(a(e._midpoint),g.max==1?b+="ff"+Color.Space(e.color,"RGB>HEX>STRING")+",":(d>1&&(f-=d-1),b+="ff"+Color.Space(e.color,"RGB>HEX>STRING")+","+f+","+a(e._midpoint)+",")):b+="ff"+Color.Space(e.color,"RGB>HEX>STRING")+","+a(d)+","}return $vars.type==="gradient"?Media.Parser.OGR_GR(b.substr(0,b.length-1)).toString():$vars.type==="palette"?"0,"+b.substr(0,b.length-
1):"ff"+b.substr(2,b.length-5)};this.flip=function(){var a=this.points;a.reverse();if($vars.type==="gradient")for(var c=0,b=a.length;c<b;c++){var d=a[c],h=Math.round(d._midpoint*100);d._midpoint=1-d._midpoint;d.midpoint.style.margin="0 "+h+"%"}this.selectedPoint=this.points.length-1-this.selectedPoint;this.redraw(!0)};this.drawToCanvas=function(a){for(var c=a.canvas,b=a.createLinearGradient(0,0,c.width,0),d=colorPalette.points,h=0,e=function(h,a){return{R:h.R*0.5+a.R*0.5,G:h.G*0.5+a.G*0.5,B:h.B*0.5+
a.B*0.5}},f=0,g=d.length;f<g;f++){var s=d[f],n=s.tmpPercent?s.tmpPercent:s._width,x=Color.Space(s.color,"RGB>HEX>STRING");if($vars.type==="gradient"){var t=d.length-1,v=d[f+1<t?f+1:t],t=Color.Space(e(d[f-1>0?f-1:0].color,s.color),"RGB>HEX>STRING"),v=Color.Space(e(v.color,s.color),"RGB>HEX>STRING");b.addColorStop(h,"#"+t);h=Math.min(1,h+n);b.addColorStop(h-(1-s._midpoint)*n,"#"+x);b.addColorStop(h,"#"+v)}else $vars.type==="palette"&&(b.addColorStop(h,"#"+Color.Space(s.color,"RGB>HEX>STRING")),h=Math.min(1,
h+n),b.addColorStop(h-(1-s._midpoint)*n,"#"+x),b.addColorStop(h,"#"+Color.Space(s.color,"RGB>HEX>STRING")))}a.fillStyle=$vars.type==="color"?"#"+x:b;a.fillRect(0,0,c.width,c.height);if(colorPalette.drawTexture)a.save(),a.fillStyle=a.createPattern(creator.texture,"repeat"),a.globalAlpha=0.4,a.globalCompositeOperation="lighter",a.fillRect(0,0,c.width,c.height),a.globalCompositeOperation="darker",a.fillRect(0,0,c.width,c.height),a.restore()};this.redraw=function(a,b){if(!a||!a.skipResize)d.width=c.offsetWidth,
d.height=c.offsetHeight;a&&removeChildNodes(e);for(var k=this.points,l=0,h=0,o=k.length;h<o;h++){var m=k[h],q=m.box,s=m.tmpPercent?m.tmpPercent:m._width,n=Color.Space(m.color,"RGB>HEX>STRING");if(!b){q.title="#"+n.toUpperCase();q.style.width=100*s+"%";q.style.borderColor="#"+n;if($vars.type==="gradient")s=creator.isW3Contrast(m.color),m.midpoint.style.background="#"+n,m.midpoint.style.color="#"+(s?"000":"FFF"),m.midpoint.style.margin="0 "+Math.round(m._midpoint*100)+"%";else if($vars.type==="color")q.style.background=
"#"+n;q.paletteID=l++;g.selectedPoint==q.paletteID?(q.className="colorControl selected",g.selectedPoint=q.paletteID):q.className="colorControl";a&&e.appendChild(q)}}this.drawToCanvas(f)};this.destroy=function(){this.points=[]};this.remove=function(a){var c=g.points,b=c.length;if(typeof a=="undefined")a=g.selectedPoint;if(b==this.min)alert($vars.type.ucwords()+"'s require at least "+this.min+" colors ;)");else{var d=c[a],h=d._width/(b-1);c.splice(a,1);g.selectedPoint=c[a-1]?a-1:Math.max(0,a-2);if(b)for(a=
0;a<b;a++)c[a]&&(c[a]._width+=h);d.box.parentNode.removeChild(d.box);colorPicker.update("RGB",c[g.selectedPoint].color);g.redraw(!0)}};this.getSelectedPoint=function(a,c,b,d,h){c=Event.coords(c);a||(a={offsetLeft:0,offsetWidth:0,style:{}});var e=windowInnerWidth/h/4,h=c.x-a.offsetLeft-e,e=a.offsetWidth-h-e*2;a.style.left=0;var f=a.offsetLeft+a.offsetWidth,g=c.x+e,s=0;a.offsetLeft>c.x-h&&(s=-h);f<g&&(s=e);var a=(c.x+s)/windowInnerWidth,c=0,h=d.length-1,n;for(n in d)if(e=d[n]._width,(c+=e)-e/b>a){h=
n-1;break}return h};this.add=function(a,c,d){var l=g.max,h=g.points,o=h.length;if(o!=l){if(typeof a=="undefined")var m=colorPicker.RGB.values,a=Color.Space(m,"RGB>HEX>STRING");else typeof a=="number"?(m=Color.Space(a,"HEX>RGB"),a=Color.Space(a,"HEX>STRING")):(Event.coords(a),a=g.getSelectedPoint(void 0,a,2,h,l),g.selectedPoint=a,m=colorPicker.RGB.values,a=Color.Space(m,"RGB>HEX>STRING"));var q=document.createElement("div");q.title="Move Color";q.className="colorControl";Event.add(q,"mouseover",function(){q.style.borderColor=
""});Event.add(q,"mouseout",function(){if(!s)q.style.borderColor=b(g.points[q.paletteID].color)});var s=!1;Event.add(q,"mousedown",function(a){var c=this,d=this.paletteID;Event.dragElement({type:"relative",event:a,element:g.points[d].box,callback:function(a,e,f){Event.preventDefault(a);Event.stopPropagation(a);window.focused&&window.focused.blur();f=="up"&&creator.animateBackground(colorPicker.RGB.values,3,!0);var o=g.points[d],m;m=Event.coords(a).y;var o=o._midpoint,j=q.style,i=f==="up",k=g.points[d];
s=!i;if(m>250&&h.length>g.min){i&&colorPalette.remove(d);j.zIndex=100;j.opacity=0.5;j.top=m-q.offsetHeight+"px";j.left="";if($vars.type==="gradient")j.background=i?"":b(k.color),n.style.display="none",k._midpoint=o;m=!0}else{j.top=i?"":"-15px";if($vars.type==="gradient")j.background="",n.style.display="block";m=!1}if(!m){o=g.getSelectedPoint(c,a,1,h,l);o==-1&&(o=0);if(e.x==0||f=="up"){if($vars.type==="gradient")c.style.background="";c.style.opacity=1;c.style.left=0;c.style.zIndex=1}else{c.style.left=
e.x+"px";if($vars.type==="gradient")c.style.background=b(colorPicker.RGB.values);c.style.opacity=0.5;c.style.zIndex=0}m=g.points[o];if(typeof m!="undefined"){if(g.selectedElement)g.selectedElement.className=g.selectedElement.className.replace("hover","");if(m.box.className.indexOf("selected")===-1)m.box.className="colorControl hover",g.selectedElement=m.box;m=windowInnerWidth/l/4;if(Math.abs(e.x)>m&&f=="up")e=h[d],a.shiftKey?h[d]=h.splice(o,1,h[d])[0]:(h.splice(d,1),h.splice(o,0,e)),g.selectedPoint=
o,g.redraw(!0)}}}});colorPicker.update("RGB",g.points[d].color,"clickControl");creator.animateBackground(colorPicker.RGB.values,2);g.selectedPoint=d;g.redraw(!1);q.style.borderColor="#f00"});var n;if($vars.type==="gradient"){var x=abPos(q);n=document.createElement("div");n.title="Tension";n.className="centerPoint";n.style.background="#"+a;n.style.color=creator.isW3Contrast(m)?"#000":"#fff";n.style.position="relative";n.style.left="-8px";n.innerHTML="&harr;";Event.add(n,"mousedown",function(a){var h=
q.paletteID,c=g.points[h];Event.dragElement({type:"absolute",event:a,element:n,callback:function(a,h,b){Event.preventDefault(a);Event.stopPropagation(a);b=="up"&&creator.animateBackground(colorPicker.RGB.values,3,!0);x.x=abPos(q).x;a=clamp((h.x-x.x)/q.offsetWidth*100,0,100);n.style.margin="0 "+a+"%";c._midpoint=a/100;g.redraw(!1,!0);creator.isW3Contrast(c.color);if(b!=="up")b=a/100*q.offsetWidth+x.x-27.5,f.lineWidth=1,f.dashedLine(b,0,b,200),f.strokeStyle="rgba(0,0,0,0.42)",f.stroke(),f.beginPath(),
f.dashedLine(b+1,0,b+1,200),f.strokeStyle="rgba(255,255,255,0.42)",f.stroke()}});h=q.paletteID;c=g.points[h];colorPicker.update("RGB",c.color,"clickControl");creator.animateBackground(colorPicker.RGB.values,2);g.selectedPoint=h;g.redraw(!1);q.style.borderColor="#f00"});q.appendChild(n)}m=document.createElement("div");m.title="Resize";m.className="colorResize";Event.add(m,"mousedown",function(a){var h=this,c=this.parentNode.paletteID,b=g.points[c+-1],d=g.points[c+1+-1];Event.dragElement({type:"relative",
event:a,element:d.box,callback:function(a,c,e){Event.preventDefault(a);Event.stopPropagation(a);window.focused&&window.focused.blur();a=c.x/windowInnerWidth;tmpPercent1=b._width+a;tmpPercent2=d._width-a;tmpPercent1<0&&(tmpPercent2+=tmpPercent1,tmpPercent1=1.0E-4);d.tmpPercent2<0&&(tmpPercent1+=tmpPercent2,tmpPercent2=1.0E-4);tmpPercent1*windowInnerWidth<20&&(a=(20-tmpPercent1*windowInnerWidth)/windowInnerWidth,tmpPercent1+=a,tmpPercent2-=a);tmpPercent2*windowInnerWidth<20&&(a=(20-tmpPercent2*windowInnerWidth)/
windowInnerWidth,tmpPercent2+=a,tmpPercent1-=a);e=="up"?(b._width=tmpPercent1,d._width=tmpPercent2,delete b.tmpPercent,delete d.tmpPercent):(b.tmpPercent=tmpPercent1,d.tmpPercent=tmpPercent2);e=="up"?h.className=h.className.replace("hovered",""):h.className.indexOf("hovered")==-1&&(h.className+=" hovered");b.box.style.width=100*tmpPercent1+"%";d.box.style.width=100*tmpPercent2+"%";g.redraw(!1,!0)}})});q.appendChild(m);e.appendChild(q);if(typeof c==="undefined"&&(c=1/(o+1),o))for(m=0;m<o;m++)if(h[m]){var t=
h[m]._width;h[m]._width=t-c*t}typeof d==="undefined"&&(d=0.5);h.splice(++g.selectedPoint,0,{midpoint:n,box:q,color:Color.Space(a,"STRING>HEX>RGB"),_width:c,_midpoint:d});g.redraw(!0)}};return this};var CP=window.CanvasRenderingContext2D&&CanvasRenderingContext2D.prototype;
if(CP&&CP.lineTo)CP.dashedLine=function(a,b,c,e,d){d||(d=[4,3]);var f=d.length;c-=a;e-=b;var g=Math.abs(c)>Math.abs(e),i=g?e/c:c/e;this.moveTo(a,b);for(var j=Math.sqrt(c*c+e*e),k=0;j>=0.1;){var l=Math.min(j,d[k%f]),h=Math.sqrt(l*l/(1+i*i));g?(c<0&&(h=-h),a+=h,b+=i*h):(e<0&&(h=-h),a+=i*h,b+=h);this[k%2==0?"lineTo":"moveTo"](a,b);j-=l;k++}};window.Color||(Color={});
Color.Picker=function(a){a||(a={});var b=this;this.width=405;this.height=35;this.elements={};this.callback=a.callback;this.update=function(a,e,d){var f=b[a],g;for(g in e)f.values[g]=e[g];if(a=="HSL")b.RGB.values=Color.Space.HSL_RGB(f.values);else if(a=="RGB")b.HSL.values=Color.Space.RGB_HSL(f.values);b.run(d)};this.build=function(){var a={Hue:"HSL",Saturation:"HSL",Luminance:"HSL",Red:"RGB",Green:"RGB",Blue:"RGB"},e=document.getElementById("ColorPicker");removeChildNodes(e);for(var d in a){var f=
b[a[d]],g=document.createElement("div");g.title=d;if(d=="Red"){var i=document.createElement("div");i.style.cssText="clear: both; width: 100%; display: block; height: 41px;";e.appendChild(i)}var i=document.createElement("input"),j=function(h){var d=this.parentNode.title,e=b[a[d]],f=0;h.type=="keydown"&&(h.keyCode==40?f=-1*(h.shiftKey?10:1):h.keyCode==38&&(f=1*(h.shiftKey?10:1)));var g=parseInt(this.value.replace(/[^0-9]/g,"")),g=Math.max(0,Math.min(this.max,g+f));e.values[d.substr(0,1)]=g;if(g!=parseInt(this.pvalue))this.pvalue=
g,b.update(e.type);h.keyCode==27&&this.blur()};Event.add(i,"click",j);Event.add(i,"keydown",j);Event.add(i,"keyup",j);Event.add(i,"keypress",j);Event.add(i,"change",j);i.max=f.max[d.substr(0,1)];i.min=0;i.className="east";i.setAttribute("type","text");g.appendChild(i);var j=function(h,d,e){return function(f){Event.dragElement({type:"absolute",event:f,element:b.elements[h].control,callback:function(f,g){Event.stopPropagation(f);Event.preventDefault(f);window.focused&&window.focused.blur();var q=b.elements[h].canvas,
j=abPos(q).x,q=q.offsetWidth,j=1-clamp(g.x-j+1,0,q)/q;d.values[h.substr(0,1)]=Math.round(j*d.named[h]);b.update(a[h],d.values);e.focus()}})}}(d,f,i),k=document.createElement("canvas");Event.add(k,"mousedown",j);k.height=b.height;k.width=b.width;g.appendChild(k);f=document.createElement("div");Event.add(f,"mousedown",j);f.className="cur";var l=document.createElement("div");f.appendChild(l);g.appendChild(f);l=document.createElement("div");Event.add(l,"mousedown",j);l.className="west";l.innerHTML=d.toUpperCase();
g.appendChild(l);e.appendChild(g);b.elements[d]={east:i,canvas:k,control:f}}};this.run=function(a){var e=b.RGB.values,d=b.HSL.values,f={Hue:[[0,[0,d.S,d.L]],[0.15,[300,d.S,d.L]],[0.3,[240,d.S,d.L]],[0.5,[180,d.S,d.L]],[0.65,[120,d.S,d.L]],[0.85,[60,d.S,d.L]],[1,[0,d.S,d.L]]],Saturation:[[0,[d.H,100,d.L]],[1,[d.H,0,d.L]]],Luminance:[[0,[d.H,d.S,100]],[0.5,[d.H,d.S,50]],[1,[d.H,d.S,0]]],Red:[[0,[255,e.G,e.B,e.A]],[1,[0,e.G,e.B,e.A]]],Green:[[0,[e.R,255,e.B,e.A]],[1,[e.R,0,e.B,e.A]]],Blue:[[0,[e.R,e.G,
255,e.A]],[1,[e.R,e.G,0,e.A]]]},g;for(g in f){var i=b.elements[g].canvas;if(i.getContext){for(var i=i.getContext("2d"),j=i.createLinearGradient(0,0,b.width,b.height),k=0,l=f[g].length;k<l;k++){var h=f[g][k];if(b.HSL.named[g]){var o=Color.Space.HSL_RGB({H:h[1][0],S:h[1][1],L:h[1][2]});j.addColorStop(h[0],"rgba("+(o.R>>0)+","+(o.G>>0)+","+(o.B>>0)+", 1)")}else o=h[1],j.addColorStop(h[0],"rgba("+(o[0]>>0)+","+(o[1]>>0)+","+(o[2]>>0)+", 1)")}i.clearRect(0,0,b.width,b.height);i.fillStyle=j;i.fillRect(0,
0,b.width,b.height);b.HSL.named[g]?(i=Math.round(d[g.substr(0,1)]),j=i/b.HSL.named[g]):(i=Math.round(e[g.substr(0,1)]),j=i/b.RGB.named[g]);k=b.width+1;l=b.elements[g];l.control.style.left=parseInt(k-j*k-this.width+14)+"px";if(parseInt(l.east.value)!=i)l.east.value=i}}this.callback&&this.callback(e,a);return e};this.HSL={type:"HSL",named:{Hue:360,Saturation:100,Luminance:100},values:{H:0,S:100,L:50},max:{H:360,S:100,L:100}};this.RGB={type:"RGBA",named:{Red:255,Green:255,Blue:255,Alpha:100},values:{R:255,
G:0,B:0,A:0},max:{R:255,G:255,B:255,A:100}};return this};typeof ColRD==="undefined"&&(ColRD={});ColRD.ColorFeed="990066,7d2deb,003768,490000,005638,1349fc,e09e87,c9171e,29e0ff,614876,3abda0,860437,be003f,000014,4c7fb2,1fadff,006ab6,6d3c32,1a6633,66ccee,bb1188,7a1b70,e9dfe5,3e62ad,1ab24c,a81919,e60033,78b075,5c3f35,300e02,c3855a,1257d8,665799,116ba0,973013,229399,00c4f0,cb0f38,367ba8,2f1140,2bf6ee,2890ce,d4ef00,004900,8f3123,000027,e95295,ff0a0e,f2d992,63430c".split(",");ColRD.PaletteFeed="0,fffff4e0,0.2,fffff4e0,0.4,fffafafa,0.6,ffb22222,0.8,ff4a3a2b,1 0,ff8dd3c7,0.125,ff8dd3c7,0.25,ffffffb3,0.375,ffffffb3,0.5,ffbebada,0.625,ffbebada,0.75,fffb8072,0.875,fffb8072,1 0,ff030101,0.25,ff7e3848,0.5,fff93868,0.75,ffffffff,1 0,ffcd5c5c,0.25,ffaaaaaa,0.5,ffcccccc,0.75,ffeeeeee,1 0,ff698a91,0.333,ffc6ceb6,0.667,ff9fb1a2,1 0,ffd3d186,0.25,ff92a77e,0.5,ffc8cf82,0.75,ff60ada7,1 0,ff4d2327,0.333,ff935f30,0.667,ffb28462,1 0,ffffffff,0.333,ff0c0623,0.667,ff5dbbc1,1 0,ff444198,0.333,ff897dad,0.667,ff7a8bb6,1 0,ff203296,0.333,ff865fb2,0.667,ffd9bc58,1 0,ffabcbe4,0.2,ff688bab,0.4,ff546b83,0.6,ff778da2,0.8,ff6387a7,1 0,ff1d207f,0.25,ff473fb8,0.5,ffa14fb3,0.75,ffffa7c7,1 0,fff07624,0.333,ffcc4d0e,0.667,fff09c24,1 0,ff8ac29f,0.25,ffed97ba,0.5,fffffffb,0.75,ff9acea8,1 0,ff030202,0.25,ff554c44,0.5,ffa9a397,0.75,fffcfff4,1 0,ff904331,0.333,ff9f9927,0.667,ff88a893,1 0,ff998141,0.333,ff832464,0.667,ffce1632,1 0,ff371418,0.333,ff775458,0.667,ffbcaeab,1 0,ff61683e,0.333,ff3d575c,0.667,ff801f18,1 0,ff22b8b6,0.143,ff0ea2a0,0.286,ff8b890b,0.429,ffbcba1e,0.571,ff8b890b,0.714,ff0a9c9a,0.857,ff008080,1 0,ff36353b,0.333,ff60578e,0.667,ff948db6,1 0,ffb2afaa,0.25,fff0cfa2,0.5,ffffac6c,0.75,ffc14700,1 0,fff32943,0.2,ff683c23,0.4,ff8d7d32,0.6,ff4d1636,0.8,ff643078,1 0,ffdebfbd,0.333,ff708380,0.667,ff8c6d51,1 0,ff575861,0.125,ffe1e3ef,0.25,ffffffff,0.375,ffffffff,0.5,ffd9dee6,0.625,ff596069,0.75,ff9d9ea3,0.875,ff2a2b30,1 0,ff966f70,0.333,ff8b9793,0.667,ffd0bdb9,1 0,ffa3aee5,0.2,ffd0e6f4,0.4,ffe4eef5,0.6,ffbbd3f0,0.8,ffa3aee5,1 0,ff0080ff,0.333,ffff0000,0.667,ff0080ff,1 0,ffc9c8ce,0.333,ff637984,0.667,ff79778f,1 0,ff04ba5b,0.25,fff5ef34,0.5,ff44cdd9,0.75,ff0f70d8,1 0,ff603048,0.25,ff614b79,0.5,ff472035,0.75,ffac5e6b,1 0,ff929790,0.143,ff8f8b8a,0.286,ffcececc,0.429,ff7a8080,0.571,ffbebebe,0.714,ff908d88,0.857,ffcececc,1 0,ff0d1431,0.333,ff3776a2,0.667,ffbbcbda,1 0,ffd3d74f,0.2,ffa6b266,0.4,ffd3d156,0.6,ffcac648,0.8,ffb8c046,1 0,ffee5b53,0.2,ffd2483e,0.4,fff0635a,0.6,ffde503c,0.8,ffca463a,1 0,ffd0e9c1,0.2,ffabd09a,0.4,fff2fcda,0.6,ffb7db9e,0.8,ffabd09a,1 0,ffa62917,0.25,fffbb64e,0.5,ffec6633,0.75,ffffc77e,1 0,ff68663d,0.333,ff9ba475,0.667,ffe2d98c,1 0,ff99635e,0.333,ffa96f6d,0.667,ff3c0101,1 0,ff37403f,0.333,ff486f3a,0.667,ff838b35,1 0,ffe0829a,0.167,fff4e28c,0.333,fff6cc90,0.5,ffbd5465,0.667,ffde9e92,0.833,ff976e90,1 0,ffb4675f,0.2,ff774842,0.4,ffbe6f6a,0.6,ff583c39,0.8,ff604848,1 0,ff3b583c,0.333,ff647fc2,0.667,ffaf9769,1 0,fff7caa0,0.2,ffdf8f52,0.4,fffad3aa,0.6,ffd18e5a,0.8,ffb5815c,1 0,ff285f88,0.25,ff9eb9d4,0.5,fff9947e,0.75,ffe45d61,1 0,ff3a2a13,0.333,ff824a1b,0.667,ffd8ae28,1 0,ff7db2a8,0.2,ff3e7d75,0.4,ff4e6658,0.6,ff3e7d75,0.8,ff88b7af,1 0,ffb42b19,0.333,ffcb8434,0.667,ff495321,1 0,ff0d7ab3,0.333,ff2196cc,0.667,ffc0ddef,1 0,ff6b6490,0.333,ff4871b7,0.667,ffa9c5d1,1".split(" ");
ColRD.GradientFeed="0,ffce558a,0.105,ffa7486a,0.21,ffa7486a,0.335,ffd75792,0.46,ffd75792,0.6,ffb94778,0.74,ffb94778,0.87,ffa3496d,1,ffa3496d 0,ff024e74,0.5,ff000203,1,ff000203 0,ffff7b02,0.5,ffffc300,1,ffffc300 0,fff07458,0.12,ffdf5342,0.24,ffdf5342,0.375,fff2795e,0.51,fff2795e,0.635,ffea643f,0.76,ffea643f,0.88,ffdc543c,1,ffdc543c 0,ff0c7db7,0.125,ff1d6798,0.25,ff1d6798,0.38,ff0d81be,0.51,ff0d81be,0.655,ff0e6eaa,0.8,ff0e6eaa,0.9,ff196798,1,ff196798 0,ff7db4dd,0.5,ffd3e5f1,1,ffd3e5f1 0,ff6d4877,0.25,ff342f77,0.5,ff342f77,0.75,ff166835,1,ff166835 0,fffcab00,0.045,ffffda09,0.09,ffffda09,0.145,ffef9800,0.2,ffef9800,0.435,fffdee00,0.67,fffdee00,0.835,ffffb400,1,ffffb400 0,ffe3f6be,0.015,ff9ccd78,0.03,ff9ccd78,0.09,ffafdc98,0.15,ffafdc98,0.415,ffadd77b,0.68,ffadd77b,0.685,ff97c869,0.69,ff97c869,0.845,ffcaeba1,1,ffcaeba1 0,ffce8f32,0.25,ffe17e69,0.5,ffe17e69,0.75,ff66857d,1,ff66857d 0,ff4a7153,0.5,ff84aa95,1,ff84aa95 0,ffb3e2cd,0.167,ffb3e2cd,0.333,fffdcdac,0.5,fffdcdac,0.667,ffcbd5e8,0.833,ffcbd5e8,1,ffcbd5e8 0,ffa4b357,0.5,ff75890c,1,ff75890c 0,fff0f0f0,0.167,fff0f0f0,0.333,ffbdbdbd,0.5,ffbdbdbd,0.667,ff636363,0.833,ff636363,1,ff636363 0,ffef8a62,0.167,ffef8a62,0.333,ffffffff,0.5,ffffffff,0.667,ff999999,0.833,ff999999,1,ff999999 0,ff44473c,0.5,ff3a5560,1,ff3a5560 0,ffe5a073,0.5,ff996b4d,1,ff996b4d 0,ffef8a62,0.167,ffef8a62,0.333,fff7f7f7,0.5,fff7f7f7,0.667,ff67a9cf,0.833,ff67a9cf,1,ff67a9cf 0,ffcadb2a,0.25,ffe5e516,0.5,fff8ec00,0.75,fffff200,1,fffff200 0,ff7d7e7d,0.5,ff0e0e0e,1,ff0e0e0e 0,ff000000,0.5,ff990000,1,ff990000 0,ff91b49d,0.245,ffb2c2f4,0.351,ffb2c2f4,0.372,ffb2c2f4,0.394,ffb2c2f4,0.417,ffa6a5d2,0.543,ffa6a5d2,0.707,ffbec3d3,1,ffbec3d3 0,ffffc2d6,0.281,ffffe2a0,0.354,ffffe2a0,0.379,fff9bb9f,0.4,fff9bb9f,0.426,ffffd0a8,0.496,ffffd0a8,0.718,ffe59fc8,1,ffe59fc8 0,ffb6b1d5,0.1,ffc2a2d8,0.2,ffc2a2d8,0.362,ffedc1d8,0.398,ffedc1d8,0.432,ffb3a4d7,0.469,ffb3a4d7,0.786,ffe6decc,1,ffe6decc 0,ff808080,0.5,ff663333,1,ff663333 0,ff000000,0.002,fffcfcfc,0.004,fffcfcfc,0.006,ff000000,0.008,ff000000,0.5,ff000000,0.992,ff000000,0.994,fffcfcfc,0.996,fffcfcfc,0.998,ff000000,1,ff000000 0,ffae1818,0.5,ff25490f,1,ff25490f 0,ff121076,0.5,ff115a0f,1,ff115a0f 0,ff9a2804,0.165,ffc14613,0.33,ffc14613,0.495,ffd87b17,0.66,ffd87b17,0.83,ffeaa803,1,ffeaa803 0,fff1a340,0.167,fff1a340,0.333,fff7f7f7,0.5,fff7f7f7,0.667,ff998ec3,0.833,ff998ec3,1,ff998ec3 0,ffee5b53,0.11,ffd2483e,0.22,ffd2483e,0.355,fff0635a,0.49,fff0635a,0.635,ffde503c,0.78,ffde503c,0.89,ffca463a,1,ffca463a 0,ffd2dfed,0.261,ffbed0ea,0.506,ffa6c0e3,0.618,ffbad0ef,0.751,ffbad0ef,0.876,ff799bc8,1,ff799bc8 0,ff4d2327,0.25,ff935f30,0.5,ff935f30,0.75,ffb28462,1,ffb28462 0,ff728f59,0.5,ff225222,1,ff225222 0,ff9dd53a,0.25,ffa1d54f,0.5,ff80c217,0.75,ff7cbc0a,1,ff7cbc0a 0,ff37403f,0.25,ff486f3a,0.5,ff486f3a,0.75,ff838b35,1,ff838b35 0,ffb59fa1,0.25,ffeaa681,0.5,ffeaa681,0.75,ffe2d98c,1,ffe2d98c 0,ff1c292f,0.25,ff364629,0.5,ff364629,0.75,ff63803d,1,ff63803d 0,ff904331,0.25,ff9f9927,0.5,ff9f9927,0.75,ff88a893,1,ff88a893 0,ff233050,0.25,ff336e6c,0.5,ff336e6c,0.75,ff916e6c,1,ff916e6c 0,ff596386,0.25,ff663b82,0.5,ff663b82,0.75,ffb23b2b,1,ffb23b2b 0,ff77310f,0.25,ff8c522c,0.5,ff8c522c,0.75,ffbc7243,1,ffbc7243 0,ff121b38,0.25,ff5a2a44,0.5,ff5a2a44,0.75,ff6f2e28,1,ff6f2e28 0,ff204c79,0.25,ff3a7094,0.5,ff3a7094,0.75,ff758aa7,1,ff758aa7 0,ff142831,0.25,ff1f2073,0.5,ff1f2073,0.75,ff5f527e,1,ff5f527e 0,ff804b65,0.25,ff81506d,0.5,ff81506d,0.75,ff907d9d,1,ff907d9d 0,ff726f4e,0.5,ffd4b177,1,ffd4b177 0,ff627d4d,0.5,ff1f3b08,1,ff1f3b08 0,ff866f5d,0.25,ffc3aa8c,0.5,ffc3aa8c,0.75,ffc4aca0,1,ffc4aca0".split(" ");
var clone=function(a){if(!a||typeof a!="object")return a;if(Object.prototype.toString.call(a).indexOf("HTML")!=-1)return a;var b=new a.constructor,c;for(c in a)b[c]=clone(a[c]);return b},removeChildNodes=function(a){for(;a.hasChildNodes();)a.removeChild(a.firstChild)},clamp=function(a,b,c){return a<b?b:a>c?c:a},createInterlace=function(a,b,c){var e=document.createElement("canvas").getContext("2d");e.canvas.width=a*2;e.canvas.height=a*2;e.fillStyle=b;e.fillRect(0,0,a,a);e.fillStyle=c;e.fillRect(a,
0,a,a);e.fillStyle=c;e.fillRect(0,a,a,a);e.fillStyle=b;e.fillRect(a,a,a,a);a=e.createPattern(e.canvas,"repeat");a.data=e.canvas.toDataURL();return a};
XMLRequest=function(a,b,c){for(var e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],d=!1,f=0;f<e.length;f++){try{d=e[f]()}catch(g){continue}break}if(d)d.open(c?"POST":"GET",a,!0),c&&d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.onreadystatechange=function(){d.readyState==4&&d.readyState==4&&b(d.responseText)},d.readyState!=
4&&d.send(c)};var Event;
(function(){var a=navigator.userAgent.toLowerCase(),b=0,c=function(a){if(a==window)return"#window";if(a==document)return"#document";a||(a={});if(!a.uniqueID)a.uniqueID="id"+b++;return a.uniqueID},e={},d=function(a,b,d,h){a=a+c(b)+"."+c(d);e[a]||d&&(e[a]=function(a){return d.call(h,a)});return e[a]},f=function(c){return!document.addEventListener?"on"+c:c=="mousewheel"&&a.indexOf("firefox")!=-1?"DOMMouseScroll":c};Event={};var g=document.addEventListener?"addEventListener":"attachEvent",i=document.removeEventListener?
"removeEventListener":"detachEvent";Event.add=function(a,c,b,h){if(typeof c!=="string"){for(var h=c,e={},b=b||"load,beforeunload,close,error,blur,click,mousedown,mouseover,mouseout,mouseup,mousemove,keydown,keyup,keypress,contextmenu".split(","),m=0;m<b.length;m++)e[b[m]]=!0;for(c in h)e[c]&&typeof h[c]==="function"&&Event.add(a,c,h[c]);return h}a[g](f(c),d(c,a,b,h||a),!1);return b};Event.remove=function(a,c,b,h){a[i](f(c),d(c,a,b,h||a),!1);return b};Event.stopPropagation=function(a){a.stopPropagation?
a.stopPropagation():a.cancelBubble=!0};Event.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1}})();typeof Event=="undefined"&&(Event={});
Event.dragElement=function(a){function b(c,h){typeof h=="undefined"&&(h="move");var b=Event.coords(c);switch(a.type){case "move":a.callback(c,{x:b.x+f-j,y:b.y+g-k},h,d);break;case "difference":a.callback(c,{x:b.x-f,y:b.y-g},h,d);break;case "relative":a.callback(c,{x:b.x-j,y:b.y-k},h,d);break;default:a.callback(c,{x:b.x,y:b.y},h,d)}}function c(a){d.cancel();b(a,"up")}var e=a.element||document.body;if(typeof a.event==="undefined")Event.add(e,"mousedown",function(c){a.event=c;Event.dragElement(a);Event.preventDefault(c);
Event.stopPropagation(c)});else{var d={cancel:function(){Event.remove(window,"mousemove",b);Event.remove(window,"mouseup",c)}},e=abPos(e),f=e.x,g=e.y,e=a.event,i=Event.coords(e),j=i.x,k=i.y;Event.add(window,"mousemove",b);Event.add(window,"mouseup",c);b(e,"down")}};Event.coords=window.ActiveXObject?function(a){return{x:a.clientX+document.documentElement.scrollLeft,y:a.clientY+document.documentElement.scrollTop}}:function(a){return{x:a.pageX,y:a.pageY}};
var abPos=function(a){for(var a=typeof a=="object"?a:document.getElementById(a),b={x:0,y:0};a!=null;)b.x+=a.offsetLeft,b.y+=a.offsetTop,a=a.offsetParent;return b};typeof Color=="undefined"&&(Color={});if(typeof Color.Space=="undefined")Color.Space={};
(function(){var a=Math.PI/180,b=1/a,c={},e={"RGB>STRING":"RGB>HEX>STRING","STRING>RGB":"STRING>HEX>RGB"},d=Color.Space=function(a,b){e[b]&&(b=e[b]);var f=b.split(">");if(typeof a=="object"&&a[0]>=0){for(var g=b.split(">")[0],i={},n=0;n<g.length;n++){var j=g.substr(n,1);i[j]=a[n]}a=i}if(c[b])return c[b](a);g="color";i=1;for(n=f[0];i<f.length;i++)i>1&&(n=n.substr(n.indexOf("_")+1)),n+=(i==0?"":"_")+f[i],a=d[n](a),g="Color.Space."+n+"("+g+")";c[b]=eval("(function(color) { return "+g+" })");return a};
d.RGB_W3RGBA=d.RGBA_W3RGBA=function(a){return"rgba("+(a.R>>0)+","+(a.G>>0)+","+(a.B>>0)+","+(typeof a.A=="number"?a.A:1)+")"};d.RYB_Hue=function(a){var c=Math.floor(a),b=c>0?a%c:0,c=f[c%360],a=f[Math.ceil(a)%360];return c+(a-c)*b};d.Hue_RYB=function(a){var c=Math.floor(a),b=c>0?a%c:0,c=g[c%360],a=g[Math.ceil(a)%360];return c+(a-c)*b};d.STRING_HEX=function(a){return parseInt("0x"+a)};d.STRING_HEX32=function(a){return a.length===6?parseInt("0xFF"+a):parseInt("0x"+a)};d.HEX_STRING=function(a,c){c||(c=
6);a||(a=0);for(var b=a.toString(16),d=b.length;d<c;)b="0"+b,d++;for(d=b.length;d>c;)b=b.substr(1),d--;return b};d.HEX32_STRING=function(a){return d.HEX_STRING(a,8)};d.HEX_RGB=function(a){return{R:a>>16,G:a>>8&255,B:a&255}};d.HEX32_RGBA=function(a){return{R:a>>>16&255,G:a>>>8&255,B:a&255,A:a>>>24}};d.RGBA_HEX32=function(a){return(a.A<<24|a.R<<16|a.G<<8|a.B)>>>0};d.RGB_HEX=function(a){if(a.R<0)a.R=0;if(a.G<0)a.G=0;if(a.B<0)a.B=0;if(a.R>255)a.R=255;if(a.G>255)a.G=255;if(a.B>255)a.B=255;return a.R<<
16|a.G<<8|a.B};d.RGB_CMY=function(a){return{C:1-a.R/255,M:1-a.G/255,Y:1-a.B/255}};d.RGB_HSL=function(a){var c=a.R/255,b=a.G/255,a=a.B/255,d=Math.min(c,b,a),e=Math.max(c,b,a),f=e-d,g,i=(e+d)/2;if(f==0)d=g=0;else{var d=i<0.5?f/(e+d):f/(2-e-d),j=((e-c)/6+f/2)/f,l=((e-b)/6+f/2)/f,f=((e-a)/6+f/2)/f;c==e?g=f-l:b==e?g=1/3+j-f:a==e&&(g=2/3+l-j);g<0&&(g+=1);g>1&&(g-=1)}return{H:g*360,S:d*100,L:i*100}};d.RGB_HSV=function(a){var c=a.R/255,b=a.G/255,a=a.B/255,d=Math.min(c,b,a),e=Math.max(c,b,a),f=e-d,g;if(f==
0)d=g=0;else{var d=f/e,i=((e-c)/6+f/2)/f,j=((e-b)/6+f/2)/f,f=((e-a)/6+f/2)/f;c==e?g=f-j:b==e?g=1/3+i-f:a==e&&(g=2/3+j-i);g<0&&(g+=1);g>1&&(g-=1)}return{H:g*360,S:d*100,V:e*100}};d.RGB_XYZ=function(a){d.RGB_XYZ_Matrix||d.getProfile("sRGB");var c=d.RGB_XYZ_Matrix,b={},e=a.R/255,f=a.G/255,a=a.B/255;d.Profile=="sRGB"?(e=e>0.04045?Math.pow((e+0.055)/1.055,2.4):e/12.92,f=f>0.04045?Math.pow((f+0.055)/1.055,2.4):f/12.92,a=a>0.04045?Math.pow((a+0.055)/1.055,2.4):a/12.92):(e=Math.pow(e,d.Gamma),f=Math.pow(f,
d.Gamma),a=Math.pow(a,d.Gamma));b.X=e*c[0]+f*c[3]+a*c[6];b.Y=e*c[1]+f*c[4]+a*c[7];b.Z=e*c[2]+f*c[5]+a*c[8];return b};d.CMY_RGB=function(a){return{R:Math.max(0,(1-a.C)*255),G:Math.max(0,(1-a.M)*255),B:Math.max(0,(1-a.Y)*255)}};d.CMY_CMYK=function(a){var c=a.C,b=a.M,a=a.Y,d=Math.min(a,Math.min(b,Math.min(c,1))),c=Math.round((c-d)/(1-d)*100),b=Math.round((b-d)/(1-d)*100),a=Math.round((a-d)/(1-d)*100),d=Math.round(d*100);return{C:c,M:b,Y:a,K:d}};d.CMYK_CMY=function(a){return{C:a.C*(1-a.K)+a.K,M:a.M*(1-
a.K)+a.K,Y:a.Y*(1-a.K)+a.K}};d.HSL_RGB=function(a){var c=a.H/360,b=a.S/100,a=a.L/100,d,e,f;b==0?b=a=c=a:(e=a<0.5?a*(1+b):a+b-b*a,d=2*a-e,f=c+1/3,f<0&&(f+=1),f>1&&(f-=1),b=6*f<1?d+(e-d)*6*f:2*f<1?e:3*f<2?d+(e-d)*(2/3-f)*6:d,f=c,f<0&&(f+=1),f>1&&(f-=1),a=6*f<1?d+(e-d)*6*f:2*f<1?e:3*f<2?d+(e-d)*(2/3-f)*6:d,f=c-1/3,f<0&&(f+=1),f>1&&(f-=1),c=6*f<1?d+(e-d)*6*f:2*f<1?e:3*f<2?d+(e-d)*(2/3-f)*6:d);return{R:b*255,G:a*255,B:c*255}};d.HSV_RGB=function(a){var c=a.H/360,b=a.S/100,a=a.V/100,d,e,f;if(b==0)d=e=f=
Math.round(a*255);else switch(c>=1&&(c=0),c*=6,D=c-Math.floor(c),A=Math.round(255*a*(1-b)),f=Math.round(255*a*(1-b*D)),C=Math.round(255*a*(1-b*(1-D))),a=Math.round(255*a),Math.floor(c)){case 0:d=a;e=C;f=A;break;case 1:d=f;e=a;f=A;break;case 2:d=A;e=a;f=C;break;case 3:d=A;e=f;f=a;break;case 4:d=C;e=A;f=a;break;case 5:d=a,e=A}return{R:d,G:e,B:f}};d.XYZ_RGB=function(a){d.XYZ_RGB_Matrix||d.getProfile("sRGB");var c=d.XYZ_RGB_Matrix,b,e;b=a.X*c[0]+a.Y*c[3]+a.Z*c[6];e=a.X*c[1]+a.Y*c[4]+a.Z*c[7];a=a.X*c[2]+
a.Y*c[5]+a.Z*c[8];d.Profile=="sRGB"?(b=b>0.0031308?1.055*Math.pow(b,1/2.4)-0.055:12.92*b,e=e>0.0031308?1.055*Math.pow(e,1/2.4)-0.055:12.92*e,a=a>0.0031308?1.055*Math.pow(a,1/2.4)-0.055:12.92*a):(b=Math.pow(b,1/d.Gamma),e=Math.pow(e,1/d.Gamma),a=Math.pow(a,1/d.Gamma));return{R:Math.round(b*255),G:Math.round(e*255),B:Math.round(a*255)}};d.XYZ_xyY=function(a){var c=a.X+a.Y+a.Z;return c==0?{x:0,y:0,Y:a.Y}:{x:a.X/c,y:a.Y/c,Y:a.Y}};d.XYZ_HLab=function(a){var c=Math.sqrt(a.Y);return{L:10*c,a:17.5*((1.02*
a.X-a.Y)/c),b:7*((a.Y-0.847*a.Z)/c)}};d.XYZ_Lab=function(a){var c=a.X/d.WPScreen.X,b=a.Y/d.WPScreen.Y,a=a.Z/d.WPScreen.Z,c=c>0.008856?Math.pow(c,1/3):7.787*c+16/116,b=b>0.008856?Math.pow(b,1/3):7.787*b+16/116,a=a>0.008856?Math.pow(a,1/3):7.787*a+16/116;return{L:116*b-16,a:500*(c-b),b:200*(b-a)}};d.XYZ_Luv=function(a){var c=d.WPScreen,b=4*a.X/(a.X+15*a.Y+3*a.Z),e=9*a.Y/(a.X+15*a.Y+3*a.Z);a.Y=a.Y>0.008856?Math.pow(a.Y,1/3):7.787*a.Y+16/116;a=116*a.Y-16;return{L:a,u:13*a*(b-4*c.X/(c.X+15*c.Y+3*c.Z))||
0,v:13*a*(e-9*c.Y/(c.X+15*c.Y+3*c.Z))||0}};d.xyY_XYZ=function(a){return{X:a.x*a.Y/a.y,Y:a.Y,Z:(1-a.x-a.y)*a.Y/a.y}};d.HLab_XYZ=function(a){var c=a.a/17.5*(a.L/10),b=a.b/7*(a.L/10),a=Math.pow(a.L/10,2);return{X:(c+a)/1.02,Y:a,Z:-(b-a)/0.847}};d.Lab_XYZ=function(a){var c=d.WPScreen,b=(a.L+16)/116,e=a.a/500+b,a=b-a.b/200,b=Math.pow(b,3)>0.008856?Math.pow(b,3):(b-16/116)/7.787,e=Math.pow(e,3)>0.008856?Math.pow(e,3):(e-16/116)/7.787,a=Math.pow(a,3)>0.008856?Math.pow(a,3):(a-16/116)/7.787;return{X:c.X*
e,Y:c.Y*b,Z:c.Z*a}};d.Lab_LCHab=function(a){var c=Math.atan2(a.b,a.a)*b;c<0?c+=360:c>360&&(c-=360);return{L:a.L,C:Math.sqrt(a.a*a.a+a.b*a.b),H:c}};d.Luv_XYZ=function(a){var c=d.WPScreen,b=(a.L+16)/116,b=Math.pow(b,3)>0.008856?Math.pow(b,3):(b-16/116)/7.787,e=a.u/(13*a.L)+4*c.X/(c.X+15*c.Y+3*c.Z),a=a.v/(13*a.L)+9*c.Y/(c.X+15*c.Y+3*c.Z),e=-(9*b*e)/((e-4)*a-e*a);return{X:e,Y:b,Z:(9*b-15*a*b-a*e)/(3*a)}};d.Luv_LCHuv=function(a){var c=Math.atan2(a.v,a.u)*b;c<0?c+=360:c>360&&(c-=360);return{L:a.L,C:Math.sqrt(a.u*
a.u+a.v*a.v),H:c}};d.LCHab_Lab=function(c){var b=c.H*a;return{L:c.L,a:Math.cos(b)*c.C,b:Math.sin(b)*c.C}};d.LCHuv_Luv=function(c){var b=c.H*a;return{L:c.L,u:Math.cos(b)*c.C,v:Math.sin(b)*c.C}};d.RGB_HSI=function(a){var c=a.R,d=a.G,a=a.B,e=0.5*(2*c-d-a),f=Math.sqrt(3)*(d-a);I=(c+d+a)/3;I>0?(S=1-Math.min(c,d,a)/I,H=Math.atan2(f,e)*b,H<0&&(H+=360)):H=S=0;return{H:H,S:S*100,I:I}};d.HSI_RGB=function(c){var b=c.H,d=c.S/100,c=c.I,e,f,g;b-=360*Math.floor(b/360);b<120?(g=c*(1-d),e=c*(1+d*Math.cos(b*a)/Math.cos((60-
b)*a)),f=3*c-e-g):b<240?(b-=120,e=c*(1-d),f=c*(1+d*Math.cos(b*a)/Math.cos((60-b)*a)),g=3*c-e-f):(b-=240,f=c*(1-d),g=c*(1+d*Math.cos(b*a)/Math.cos((60-b)*a)),e=3*c-f-g);return{R:e,G:f,B:g}};d.getAdaption=function(a,c){var b={"XYZ scaling":{A:[[1,0,0],[0,1,0],[0,0,1]],Z:[[1,0,0],[0,1,0],[0,0,1]]},"Von Kries":{A:[[0.40024,-0.2263,0],[0.7076,1.16532,0],[-0.08081,0.0457,0.91822]],Z:[[1.859936,0.361191,0],[-1.129382,0.638812,0],[0.219897,-6.0E-6,1.089064]]},Bradford:{A:[[0.8951,0.2664,-0.161399],[-0.750199,
1.7135,0.0367],[0.038899,-0.0685,1.0296]],Z:[[0.986993,-0.14705399,0.15996299],[0.43230499,0.51836,0.0492912],[-0.00852866,0.0400428,0.96848699]]}},e=d.WPSource,f=d.WPScreen,g=b[c].A,b=b[c].Z,f=k(g,[[f.X],[f.Y],[f.Z]]),e=k(g,[[e.X],[e.Y],[e.Z]]),g=k(b,k([[f[0]/e[0],0,0],[0,f[1]/e[1],0],[0,0,f[2]/e[2]]],k(g,[[a.X],[a.Y],[a.Z]])));return{X:g[0][0],Y:g[1][0],Z:g[2][0]}};d.getProfile=function(a){function c(a){return d.getAdaption(d.xyY_XYZ(a),"Bradford")}var b=i[a];d.Profile=a;d.ICCProfile=b;d.Gamma=
b[0];d.WPSource=d.getIlluminant("2",b[1]);var a=c({x:b[2],y:b[3],Y:b[4]}),e=c({x:b[5],y:b[6],Y:b[7]}),b=c({x:b[8],y:b[9],Y:b[10]});d.RGB_XYZ_Matrix=[a.X,a.Y,a.Z,e.X,e.Y,e.Z,b.X,b.Y,b.Z];d.XYZ_RGB_Matrix=l(d.RGB_XYZ_Matrix)};d.getIlluminant=function(a,c){var b=j[c],b=a=="2"?{x:b[0],y:b[1],Y:1}:{x:b[2],y:b[3],Y:1};return d.xyY_XYZ(b)};var f=[],g=[];(function(){for(var a=[[0,0],[15,8],[30,17],[45,26],[60,34],[75,41],[90,48],[105,54],[120,60],[135,81],[150,103],[165,123],[180,138],[195,155],[210,171],
[225,187],[240,204],[255,219],[270,234],[285,251],[300,267],[315,282],[330,298],[345,329],[360,0]],c=0;c<360;c++)for(var b=!1,d=!1,e=0;e<24;e++){var i=a[e],j=a[e+1];j&&j[1]<i[1]&&(j[1]+=360);!b&&i[0]<=c&&j[0]>c&&(g[c]=(i[1]+(j[1]-i[1])*(c-i[0])/(j[0]-i[0]))%360,b=!0);!d&&i[1]<=c&&j[1]>c&&(f[c]=(i[0]+(j[0]-i[0])*(c-i[1])/(j[1]-i[1]))%360,d=!0);if(b==!0&&d==!0)break}})();var i={"Adobe (1998)":[2.2,"D65",0.64,0.33,0.297361,0.21,0.71,0.627355,0.15,0.06,0.075285],"Apple RGB":[1.8,"D65",0.625,0.34,0.244634,
0.28,0.595,0.672034,0.155,0.07,0.083332],BestRGB:[2.2,"D50",0.7347,0.2653,0.228457,0.215,0.775,0.737352,0.13,0.035,0.034191],"Beta RGB":[2.2,"D50",0.6888,0.3112,0.303273,0.1986,0.7551,0.663786,0.1265,0.0352,0.032941],"Bruce RGB":[2.2,"D65",0.64,0.33,0.240995,0.28,0.65,0.683554,0.15,0.06,0.075452],"CIE RGB":[2.2,"E",0.735,0.265,0.176204,0.274,0.717,0.812985,0.167,0.0090,0.010811],ColorMatch:[1.8,"D50",0.63,0.34,0.274884,0.295,0.605,0.658132,0.15,0.075,0.066985],DonRGB4:[2.2,"D50",0.696,0.3,0.27835,
0.215,0.765,0.68797,0.13,0.035,0.03368],eciRGB:[1.8,"D50",0.67,0.33,0.32025,0.21,0.71,0.602071,0.14,0.08,0.077679],"Ekta Space PS5":[2.2,"D50",0.695,0.305,0.260629,0.26,0.7,0.734946,0.11,0.0050,0.004425],"Generic RGB":[1.8,"D65",0.6295,0.3407,0.232546,0.2949,0.6055,0.672501,0.1551,0.0762,0.094952],"HDTV (HD-CIF)":[1.95,"D65",0.64,0.33,0.212673,0.3,0.6,0.715152,0.15,0.06,0.072175],NTSC:[2.2,"C",0.67,0.33,0.298839,0.21,0.71,0.586811,0.14,0.08,0.11435],"PAL / SECAM":[2.2,"D65",0.64,0.33,0.222021,0.29,
0.6,0.706645,0.15,0.06,0.071334],ProPhoto:[1.8,"D50",0.7347,0.2653,0.28804,0.1596,0.8404,0.711874,0.0366,1.0E-4,8.6E-5],SGI:[1.47,"D65",0.625,0.34,0.244651,0.28,0.595,0.67203,0.155,0.07,0.083319],"SMPTE-240M":[1.92,"D65",0.63,0.34,0.212413,0.31,0.595,0.701044,0.155,0.07,0.086543],"SMPTE-C":[2.2,"D65",0.63,0.34,0.212395,0.31,0.595,0.701049,0.155,0.07,0.086556],sRGB:[2.2,"D65",0.64,0.33,0.212656,0.3,0.6,0.715158,0.15,0.06,0.072186],"Wide Gamut":[2.2,"D50",0.7347,0.2653,0.258187,0.1152,0.8264,0.724938,
0.1566,0.0177,0.016875]},j={A:[0.44757,0.40745,0.45117,0.40594,2856],B:[0.34842,0.35161,0.3498,0.3527,4874],C:[0.31006,0.31616,0.31039,0.31905,6774],D50:[0.34567,0.3585,0.34773,0.35952,5003],D55:[0.33242,0.34743,0.33411,0.34877,5503],D65:[0.31271,0.32902,0.31382,0.331,6504],D75:[0.29902,0.31485,0.29968,0.3174,7504],E:[1/3,1/3,1/3,1/3,5454],F1:[0.3131,0.33727,0.31811,0.33559,6430],F2:[0.37208,0.37529,0.37925,0.36733,4230],F3:[0.4091,0.3943,0.41761,0.38324,3450],F4:[0.44018,0.40329,0.4492,0.39074,2940],
F5:[0.31379,0.34531,0.31975,0.34246,6350],F6:[0.3779,0.38835,0.3866,0.37847,4150],F7:[0.31292,0.32933,0.31569,0.3296,6500],F8:[0.34588,0.35875,0.34902,0.35939,5E3],F9:[0.37417,0.37281,0.37829,0.37045,4150],F10:[0.34609,0.35986,0.3509,0.35444,5E3],F11:[0.38052,0.37713,0.38541,0.37123,4E3],F12:[0.43695,0.40441,0.44256,0.39717,3E3]};d.Profile="RGB";d.RGB_XYZ_Matrix="";d.XYZ_RGB_Matrix="";d.Gamma="";d.WPScreen=d.getIlluminant("2","D65");var k=function(a,c){var b=a.length,d=b,e,f,g=c[0].length,i,j=a[0].length,
l=[],k,u,r;do{e=d-b;l[e]=[];f=g;do{i=g-f;k=0;u=j;do r=j-u,k+=a[e][r]*c[r][i];while(--u);l[e][i]=k}while(--f)}while(--b);return l},l=function(a){var c=1/(a[0]*(a[4]*a[8]-a[5]*a[7])-a[1]*(a[3]*a[8]-a[5]*a[6])+a[2]*(a[3]*a[7]-a[4]*a[6]));return[c*(a[4]*a[8]-a[5]*a[7]),c*-1*(a[1]*a[8]-a[2]*a[7]),c*(a[1]*a[5]-a[2]*a[4]),c*-1*(a[3]*a[8]-a[5]*a[6]),c*(a[0]*a[8]-a[2]*a[6]),c*-1*(a[0]*a[5]-a[2]*a[3]),c*(a[3]*a[7]-a[4]*a[6]),c*-1*(a[0]*a[7]-a[1]*a[6]),c*(a[0]*a[4]-a[1]*a[3])]}})();window.Color||(Color={});
(function(){Color.Delta={};Color.W3Brightness=function(a,b){return Math.abs((a.R*299+a.G*587+a.B*114)/1E3-(b.R*299+b.G*587+b.B*114)/1E3)};Color.W3Difference=function(a,b){var c=Math.max(a.R,b.R)-Math.min(a.R,b.R),e=Math.max(a.G,b.G)-Math.min(a.G,b.G),b=Math.max(a.B,b.B)-Math.min(a.B,b.B);return c+e+b};Color.Delta.E=function(a,b){return Math.sqrt(Math.pow(a.L-b.L,2)+Math.pow(a.a-b.a,2)+Math.pow(a.b-b.b,2))};Color.Delta.L=function(a,b){var c=Math.sqrt(a.L*a.L);return Math.sqrt(b.L*b.L)-c};Color.Delta.C=
function(a,b){var c=Math.sqrt(a.a*a.a+a.b*a.b),e=Math.sqrt(b.a*b.a+b.b*b.b);return c-e};Color.Delta.h=function(a,b){return(360+(b.H-a.H))%360};Color.Delta.H=function(a,b){var c=Math.sqrt(a.a*a.a+a.b*a.b),e=Math.sqrt(b.a*b.a+b.b*b.b),c=(c-e)*(c-e),e=Math.pow(a.a-b.a,2),d=Math.pow(a.b-b.b,2);return Math.sqrt(e+d-c)};Color.Delta.CMC=function(a,b){var c,e,d,f,g,i,j;c=Math.sqrt(a.a*a.a+a.b*a.b);e=Math.sqrt(b.a*b.a+b.b*b.b);g=a.L-b.L;e=c-e;i=Math.sqrt(Math.abs(Math.pow(a.a-b.a,2)+Math.pow(a.b-b.b,2)-e*
e));f=Math.sqrt(Math.pow(c,4)/(Math.pow(c,4)+1900));d=Math.atan(a.b/a.a)*(180/Math.PI);j=d<164||d>345?0.36+Math.abs(0.4*Math.cos((d+35)*(Math.PI/180))):0.56+Math.abs(0.2*Math.cos((d+168)*(Math.PI/180)));d=a.L<16?0.511:0.040975*a.L/(1+0.01765*a.L);c=0.0638*c/(1+0.0131*c)+0.638;f=c*(f*j+1-f);d=g/(1*d);c=e/(1*c);f=i/f;return Math.sqrt(d*d+c*c+f*f)};Color.Delta.E94=function(a,b){var c=Math.sqrt(a.a*a.a+a.b*a.b),e=Math.sqrt(b.a*b.a+b.b*b.b),d=b.L-a.L;e-=c;var f=a.L-b.L,g=a.a-b.a,i=a.b-b.b,f=Math.sqrt(f*
f+g*g+i*i);DH=Math.sqrt(f)>Math.sqrt(Math.abs(d))+Math.sqrt(Math.abs(e))?Math.sqrt(f*f-d*d-e*e):0;d/=1;e/=1*(1+0.045*c);DH/=1*(1+0.015*c);return Math.sqrt(d*d+e*e+DH*DH)};Color.Delta.E2k=function(a,b){var c=Math.PI*2/360,e=Math.PI/180;C1=Math.sqrt(a.a*a.a+a.b*a.b);C2=Math.sqrt(b.a*b.a+b.b*b.b);CX=(C1+C2)/2;GX=0.5*(1-Math.sqrt(Math.pow(CX,7)/(Math.pow(CX,7)+Math.pow(25,7))));NN=(1+GX)*a.a;C1=Math.sqrt(NN*NN+a.b*a.b);H1=Math.atan(a.b/NN)*(180/Math.PI);NN=(1+GX)*b.a;C2=Math.sqrt(NN*NN+b.b*b.b);H2=Math.atan(b.b/
NN)*(180/Math.PI);DL=b.L-a.L;DC=C2-C1;C1*C2==0?DH=0:(NN=Math.round(H2-H1,12),DH=Math.abs(NN)<=180?H2-H1:NN>180?H2-H1-360:H2-H1+360);DH=2*Math.sqrt(C1*C2)*Math.sin(DH/2*e);LX=(a.L+b.L)/2;CY=(C1+C2)/2;C1*C2==0?HX=H1+H2:(NN=Math.abs(Math.round(H1-H2,12)),HX=NN>180?H2+H1<360?H1+H2+360:H1+H2-360:H1+H2,HX/=2);TX=1-0.17*Math.cos((HX-30)*e)+0.24*Math.cos(2*HX*c)+0.32*Math.cos((3*HX+6)*c)-0.2*Math.cos((4*HX-63)*e);PH=30*Math.exp(-((HX-275)/25)*((HX-275)/25));RC=2*Math.sqrt(Math.pow(CY,7)/(Math.pow(CY,7)+Math.pow(25,
7)));SL=1+0.015*(LX-50)*(LX-50)/Math.sqrt(20+(LX-50)*(LX-50));SC=1+0.045*CY;SH=1+0.015*CY*TX;RT=-Math.sin(2*PH*c)*RC;DL/=1*SL;DC/=1*SC;DH/=1*SH;return Math.sqrt(DL*DL+DC*DC+DH*DH+RT*DC*DH)}})();window.Color||(Color={});if(!window.Color.Harmony)Color.Harmony={};
(function(){var a=Color.Harmony,b=function(a,b){var d=(Color.Space.RYB_HSV(a).H+b)%360;d<0&&(d+=360);return Color.Space.HSV_RYB({H:d,S:a.S,V:a.V})};a.analogous=function(a,e,d){var f=[a],g;isNaN(d)&&(d=0.25);isNaN(e)&&(e=10);var i=[1,2,-1,-2],j=[220,100,-50,100],k,l;for(l in i){var h=j[l=parseInt(l)];g=b(a,e*i[l]);k=44-h*0.1;g.V=a.V-d*h<k?k:a.V-d*h;f.push({H:g.H,S:Math.max(0,g.S-5),V:Math.max(0,g.V)})}return f};a.complement=function(a){var e=[a];e.push({H:a.H,S:a.S,V:a.V>40?10+a.V*0.25:100-a.V*0.25});
e.push({H:a.H,S:10+a.S*0.3,V:Math.min(100,30+a.V)});a=b(a,180);e.push({H:a.H,S:a.S,V:a.V>30?10+a.V*0.25:100-a.V*0.25});e.push({H:a.H,S:a.S,V:a.V});e.push({H:a.H,S:10+a.S*0.25,V:Math.min(100,30+a.V)});return e};a.split_complement=function(a){var e=[a],d=b(a,150);e.push({H:d.H,S:d.S,V:Math.min(100,10+d.V)});d=b(a,210);e.push({H:d.H,S:d.S,V:Math.min(100,10+d.V)});return e};a.monochrome=function(a){var b=[a];b.push({H:a.H,S:a.S-30<10?a.S+30:a.S-30,V:a.V-50<20?a.V+30:a.V-50});b.push({H:a.H,S:a.S,V:a.V-
20<20?a.V+60:a.V-20});b.push({H:a.H,S:a.S-30<10?a.S+30:a.S-30,V:Math.max(20,a.V+(100-a.V)*0.2)});b.push({H:a.H,S:a.S,V:a.V-50<20?a.V+30:a.V-50});return b};a.triad=function(a,e){var d=[a],f;isNaN(e)&&(e=120);f=b(a,e);d.push({H:f.H,S:f.S,V:Math.min(100,10+f.V)});f=b(a,-e);d.push({H:f.H,S:f.S,V:Math.min(100,10+f.V)});return d};a.tetrad=function(a,e){var d=[a],f;isNaN(e)&&(e=90);f=b(a,e);d.push({H:f.H,S:f.S,V:clamp(a.V<50?f.V+20:f.V-20,0,100)});f=b(a,e*2);d.push({H:f.H,S:f.S,V:clamp(a.V<50?f.V+10:f.V-
10,0,100)});f=b(a,e*3);d.push({H:f.H,S:f.S,V:Math.min(100,10+f.V)});return d};a.compound=function(a,e){var d=[a],f;e||(e=1);f=b(a,30*e);d.push({H:f.H,S:f.S,V:a.V-25<60?a.V+25:a.V-25});d.push({H:f.H,S:a.S-40<10?a.S+40:a.S-40,V:a.V-40<20?a.V+40:a.V-40});f=b(a,160*e);d.push({H:f.H,S:a.S-25<10?a.S+25:a.S-25,V:Math.max(20,a.V)});f=b(a,150*e);d.push({H:f.H,S:a.S-10<80?a.S+10:a.S-10,V:a.V-30<60?a.V+30:a.V-30});d.push({H:f.H,S:a.S-10<80?a.S+10:a.S-10,V:a.V-40<20?a.V+40:a.V-40});return d}})();
typeof DOMLoader==="undefined"&&(DOMLoader={});DOMLoader.link=function(a){var b=a.href.replace(/[^a-zA-Z 0-9]+/g,"");if(!document.getElementById(b)){var c=document.createElement("link");c.href=a.href;c.id=b;c.setAttribute("rel","stylesheet");c.setAttribute("type","text/css");a=document.getElementsByTagName("head")[0];if(!a)a=document.body;a.appendChild(c)}};typeof DOMLoader==="undefined"&&(DOMLoader={});DOMLoader.script=function(){this.loaded={};this.loading={};return this};
DOMLoader.script.prototype.add=function(a){var b=this,c=a.srcs;typeof c==="undefined"&&(c=[{src:a.src,verify:a.verify}]);var e=document.getElementsByTagName("head")[0],d=function(a,c){if(!b.loaded[a.src]&&(!c||eval(c))){b.loaded[a.src]=!0;if(b.loading[a.src])b.loading[a.src]();delete b.loading[a.src];a.callback&&a.callback();typeof k!=="undefined"&&k()}},f=[],g=function(a){if(/([\w\d.\[\]])$/.test(a.verify))a.test="(typeof("+a.verify+') !== "undefined")',f.push(a.test);var c=document.createElement("script");
c.onreadystatechange=function(){this.readyState!=="loaded"&&this.readyState!=="complete"||d(a)};c.onload=function(){d(a)};c.setAttribute("type","text/javascript");c.setAttribute("src",a.src);e.appendChild(c);b.loading[a.src]=function(){}},i=function(b){if(b)d(b,b.test);else for(var e=0;e<c.length;e++)d(c[e],c[e].test);!a.strictOrder&&eval(f.join(" && "))?a.callback&&a.callback():setTimeout(function(){i(b)},10)};if(a.strictOrder){var j=-1,k=function(){j++;if(c[j]){var d=c[j],e=d.src;b.loading[e]?b.loading[e]=
function(){d.callback&&d.callback();k()}:b.loaded[e]?k():(g(d),i(d))}else a.callback&&a.callback()};k()}else{for(j=0;j<c.length;j++){if(b.loaded[c[j].src])return;g(c[j])}i()}};DOMLoader.script=new DOMLoader.script;window.Media||(Media={});if(!window.Media.Parser)Media.Parser={};
(function(){Media.Parser.GPL=function(a){for(var b=[],a=a.split("\n"),c=0;c<a.length;c++)isNaN(parseInt(a[c].substr(0,3)))||b.push(Color.Space({R:parseInt(a[c].substr(0,3)),G:parseInt(a[c].substr(4,3)),B:parseInt(a[c].substr(8,3))},"RGB>HEX>STRING"));return b};Media.Parser.GR_OGR=function(a){typeof a==="string"&&(a=a.split(","));for(var b=0,c=[],e=1;e<a.length;e+=4){var d=parseInt("0x"+a[e]),d=Color.Space.HEX_STRING(d,8),f=typeof a[e+1]==="undefined"?1:a[e+1],g=parseFloat(typeof a[e-1]==="undefined"?
0:a[e-1]),i=f-b;b+=i;c.push(d);c.push(i);c.push(1-(f-g)/i)}return c};Media.Parser.OGR_GR=function(a){typeof a==="string"&&(a=a.split(","));for(var b=[],c=0,e="",d=0;d<a.length;d+=3){var f=Color.Space(a[d],a[d].length===6?"HEX>STRING":"HEX32>STRING"),g=parseFloat(a[d+1]),i=parseFloat(a[d+2])*g+c;if(e){var j=Color.Space(f,"STRING>HEX32>RGBA"),e=Color.Space(e,"STRING>HEX32>RGBA"),j=Color.Space({R:j.R*0.5+e.R*0.5,G:j.G*0.5+e.G*0.5,B:j.B*0.5+e.B*0.5,A:j.A*0.5+e.A*0.5},"RGBA>HEX32>STRING");b.push(c);b.push(j)}b.push(i);
b.push(f);c+=g;e=f}return b};Media.Parser.OGR_CSSPNG=function(){var a,b;function c(a){return i+"<pre style='font: 16px courier; margin: 0; padding:0; line-height: 1.4em'>"+a+"</pre></p><input type='submit' value='Back' onclick=\"document.getElementById('csscode').style.display = 'none'\">"}var e=document.createElement("a");e.href=window.location.href;Backdrop.onFormSubmit(e.protocol+"//"+e.hostname+e.pathname+e.search);picker.toggle(!1);var d=config.scale,f=document.createElement("canvas"),g=f.getContext("2d"),
e=document.getElementById("foxybox");document.getElementById("csscode").style.display="block";removeChildNodes(e);e.innerHTML="Right click on image(s), or drag image to your desktop to save!<p>";var i='<p style="font: 16px courier; line-height: 1em"><span style="color: #555">CSS code:</span>',j=config.textureEnabled?noise.width:1,k=config.textureEnabled?noise.height:1,l=CPColor.stops;if(config.rotate<Math.PI){a=0;b=-1E3;for(var h in l)if(l[h].stop>b)a=h,b=l[h].stop}else for(h in a=0,b=1E3,l)if(l[h].stop<
b)a=h,b=l[h].stop;b=CPColor.stops[a];b=Color.RGB_HEXSTRING(b);b="#"+b;if(CPColor.stops.length==1)if(config.textureEnabled){f.width=j*d;f.height=k*d;g.drawImage(canvas,0,0);var o=f.toDataURL("image/"+mime),l=document.createElement("img");l.src=o;e.appendChild(l);e.innerHTML+=c("background: "+b+';\nbackground-image: url("image1.'+mime+'");')}else e.innerHTML="",e.innerHTML+=c("background: "+b);else{width/d<j&&(j=width/d);height/d<k&&(k=height/d);if(config.rotate%Math.PI){var m="repeat-x";f.width=j*
d;f.height=height}else m="repeat-y",f.width=width,f.height=k*d;g.drawImage(canvas,0,0);o=f.toDataURL("image/"+mime);l=document.createElement("img");e.appendChild(l);l.src=o;if(config.textureEnabled){var o=CPColor.active,q=[];for(h in CPColor.stops)q.push(CPColor.stops[h]);CPColor.stops=[CPColor.stops[a]];CPColor.active=0;Backdrop.createGradient();f.width=j*d;f.height=k*d;g.drawImage(canvas,0,0);h=f.toDataURL("image/"+mime);l=document.createElement("img");e.appendChild(l);l.src=h;CPColor.stops=q;CPColor.active=
o;Backdrop.createGradient();e.innerHTML+=c("background: "+b+";\nbackground-image: "+('url("image1.'+mime+'"), url("image2.'+mime+'")')+";\nbackground-repeat: "+m+", repeat;")}else e.innerHTML+=c("background: "+b+";"+Backdrop.generateCSSGradient()+"\n/* failsafe; use conditional include */\nbackground-image: "+('url("image1.'+mime+'")')+";\nbackground-repeat: "+m+";")}};Media.Parser.OGR_CSS=function(a){a||(a="fff5f6f6,0.2075,0,ffb8bac6,0.2801,0.9999999999999998,fff5f6f6,0.5124,1".split(","));for(var b=
a.length/3==2,c="",e="",d="",f=0;f<a.length;f+=2){var g=a[f].length===6?"HEX>RGB":"HEX32>RGBA",i=Color.Space(parseInt("0x"+a[f+1]),g),g=parseFloat(a[f]),j=Color.Space.RGB_W3RGBA(i),i=Color.Space(i,"RGB>HEX>STRING");b&&(c+=c?"endColorstr='#"+i+"'":"startColorstr='#"+i+"', ");e+=j+" "+Math.round(g*100)+"%, ";d+="color-stop("+g+", "+j+"), "}a="";a+="/* for W3C-compliant browsers */\nbackground-image: linear-gradient(top, "+e.substr(0,e.length-2)+");\n";a+="/* for Safari 5.03+ and Chrome 7+ */\nbackground-image: -webkit-gradient(linear, left top, left bottom, "+
d.substr(0,d.length-2)+");\n";a+="/* for Firefox 3.6+ */\nbackground-image: -moz-linear-gradient(top, "+e.substr(0,e.length-2)+");\n";a+="/* for Opera 11.1+ */\nbackground-image: -o-linear-gradient(top, "+e.substr(0,e.length-2)+");\n";b&&(a+="/* for IE */\nfilter: progid:DXImageTransform.Microsoft.gradient("+c+");\n");return a};Media.Parser.OGR_SVG=function(a){a||(a="fff5f6f6,0.2075,0,ffb8bac6,0.2801,0.9999999999999998,fff5f6f6,0.5124,1".split(","));for(var b="",c=0;c<a.length;c+=2){var e=a[c].length===
6?"HEX>RGB":"HEX32>RGBA",e=Color.Space(parseInt("0x"+a[c+1]),e),d=parseFloat(a[c]),f=Color.Space(e,"RGB>HEX>STRING");b+='<stop offset="'+d+'%" style="stop-color:#'+f+";stop-opacity:"+(e.A||1)+'"/>'}return'<linearGradient x1="0%" y1="0%" x2="100%" y2="0%" spreadMethod="pad" gradientUnits="objectBoundingBox">'+b+"</linearGradient>"};Media.Parser.OGR_GGR=function(a){function b(){e+=[d(i),d(g),d(c),f[0],f[1],f[2],f[3],m,q,s,n,"0 0 0 0"].join(" ")+"\n"}a||(a="fff5f6f6,0.2075,0,ffb8bac6,0.2801,0.9999999999999998,fff5f6f6,0.5124,1".split(","));
for(var c=0,e="",d=function(a){a.toString()==="NaN"&&(a=1);a=String(Math.round(a*1E5)/1E5);for(a.length===1&&(a+=".0");a.length<=7;)a+="0";return a},f="",g=0,i=0,j=!1,k=0;k<a.length;k+=3){var l=a[k].length===6?"HEX>RGB":"HEX32>RGBA",l=Color.Space(parseInt("0x"+a[k]),l),h=parseFloat(a[k+1]),o=parseFloat(a[k+2])*h,m=d(l.R/255),q=d(l.G/255),s=d(l.B/255),n=d(l.A/255);c+=h;j?(b(),j=!1):(k+3===a.length&&(i=g,g=o*h+(c-h),b()),j=!0);f=[m,q,s,n];g=c;i=o*h+(c-h)}return e};Media.Parser.GGR_OGR=function(a){function b(b,
e){var f=Math.round(e[b[2]]*255),g=Math.round(e[b[3]]*255),i=Math.round(e[b[4]]*255),f=(Math.round(e[b[5]]*255)<<24|f<<16|g<<8|i)>>>0,f=Color.Space.HEX_STRING(f,a.bits||8),g=e[b[1]]-c;c+=g;i=(e[b[0]]-(c-g))/g;d.push(f);d.push(Math.round(g*1E6)/1E6);d.push(Math.round(i*1E6)/1E6)}var c=0;if(!a||!a.ggr)a={ggr:"GIMP Gradient\n\t\tName: Brown Gloss\n\t\t2\n\t\t0.000000 0.250000 0.500000 0.941176 0.717647 0.631373 1.000000 0.549020 0.200000 0.062745 1.000000 0 0 0 0\n\t\t0.500000 0.750000 1.000000 0.458824 0.133333 0.003922 1.000000 0.749020 0.431373 0.305882 1.000000 0 0 0 0\n"};
for(var e=a.ggr.split("\n"),d=[],f=[],g=3;g<e.length-1;g++){var i=e[g].split(" ");i[3]==f[0]&&i[4]==f[1]&&i[5]==f[2]||b([0,1,3,4,5,6],i);b([2,2,7,8,9,10],i);f=[i[7],i[8],i[9]]}return d}})();String.prototype.replaceAll=function(a,b){if(typeof a=="object"){for(var c=this,e=0;e<a.length;e++)c=c.split(a[e]).join(b[e]);return c}return this.split(a).join(b)};String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.ucfirst=function(){return this[0].toUpperCase()+this.substr(1)};
String.prototype.ucwords=function(){return this.replace(/^(.)|\s(.)/g,function(a){return a.toUpperCase()})};String.prototype.addslashes=function(){return this.replace(/([\\"'])/g,"\\$1").replace(/\0/g,"\\0")};String.prototype.stripslashes=function(){return this.replace(/\0/g,"0").replace(/\\([\\'"])/g,"$1")};String.format=function(a){var b=Array.prototype.slice.call(arguments,1,arguments.length);return a.replace(/\{(\d+)\}/g,function(a,e){return b[e]})};
String.prototype.basename=function(){return this.replace(/\\/g,"/").replace(/.*\//,"")};if(typeof widgets=="undefined")var widgets={};
(function(){var a={"text/css":"string","text/html":"string","text/plain":"string"};widgets.FileSaver=function(b){typeof b=="undefined"&&(b={});var c=b.jsDir||"./js/",e=this;this.html5=typeof ArrayBuffer==="function";this.download=function(b){if(typeof BlobBuilder==="function"&&b.getData){var c=b.getData(),e=b.name,j=b.mime,k=b.charset,b=b.extension,l="";if(typeof c==="string"){if(c.indexOf("base64")!==-1){var h=c.substr(5).split(","),c=h[1],j=h[0].split(";")[0];b||(b=j.split("/")[1]);a[h[0]]||(l=
"binary")}}else l="binary",j="application/zip",b="zip",c=d(c);e||(e="download");j||(j="text/plain");b||(b="txt");l||(l=a[j]||"binary");h=new BlobBuilder;if(l==="string")h.append(c),k&&(j+=";charset="+k);else{for(var c=atob(c),k=new ArrayBuffer(c.length),l=new Uint8Array(k),o=0;o<c.length;o++)l[o]=c.charCodeAt(o);h.append(k)}j=h.getBlob(j);saveAs(j,e+"."+b)}};this.button=function(a){var b=a.parent||document.body,i=a.id,j=a.fileName,k=a.fileType,l=a.getData,h=a.format==="fake",o=document.createElement("div");
o.className="downloadifyContainer";var m=document.createElement("div");m.id=i;o.appendChild(m);m=document.createElement("div");m.className="downloadify";m.style.cssText="width: 90px; text-align: center;";m.innerHTML=a.title||j+"."+k;o.appendChild(m);b.appendChild(o);b=document.getElementById(i);e.html5||h?b.parentNode.onclick=function(){h?l():e.download({name:j,extension:k,getData:l})}:(Event.add(b,"mousedown",function(a){Event.stopPropagation(a)}),Downloadify.create(i,{filename:function(){return j+
"."+k},data:function(){var a=l();typeof a!=="string"&&(a=d(a));return a},downloadImage:c+"downloadify.png",swf:c+"downloadify.swf",transparent:!0,append:!1,width:110,height:40,dataType:a.format}))};var d=function(b){for(var c=new JSZip,e=0,d=b.length;e<d;e++){var k=b[e].data,l={};if(k.indexOf("base64")!==-1){k=k.split(";");if(a[k[0].substr(5)])l.binary=!1;l.base64=!0;k=k[1].substr(7)}c.add(b[e].name,k,l)}return c.generate()};return this}})();typeof widgets==="undefined"&&(widgets={});
(function(a){var b=Math.PI,c={id:"loader",bars:12,radius:0,lineWidth:20,lineHeight:70};a.Loader=function(a){function d(){n.save();n.clearRect(0,0,h,h);n.translate(h/2,h/2);for(var c=360-360/q,d=0;d<q;d++){var g=d/q*2*b+m;n.save();n.translate(s*Math.sin(-g),s*Math.cos(-g));n.rotate(g);var g=-a.lineWidth/2,i=a.lineWidth,j=a.lineHeight,k=i/2;n.beginPath();n.moveTo(g+k,0);n.lineTo(g+i-k,0);n.quadraticCurveTo(g+i,0,g+i,0+k);n.lineTo(g+i,0+j-k);n.quadraticCurveTo(g+i,0+j,g+i-k,0+j);n.lineTo(g+k,0+j);n.quadraticCurveTo(g,
0+j,g,0+j-k);n.lineTo(g,0+k);n.quadraticCurveTo(g,0,g+k,0);n.fillStyle="hsla("+d/(q-1)*c+", 100%, 50%, 0.85)";n.fill();n.restore()}n.restore();m+=0.07;if(a.messageAnimate&&(c=m/0.07>>0,c%10==0))f.span.innerHTML=a.message+a.messageAnimate[c/10%a.messageAnimate.length]}var f=this;if(document.body){a||(a={});for(var g in c)typeof a[g]==="undefined"&&(a[g]=c[g]);var i=document.getElementById(a.id);if(!i){g=document.createElement("div");g.style.cssText="color: #fff; pointer-events: none; -webkit-transition-property: opacity; -webkit-transition-duration: .5s; position: absolute; left: 0; top: 0; width: 100%; height: 100%; z-index: 10000; background: rgba(0,0,0,0.5); opacity: 1";
if(a.message){var j=document.createElement("span");j.style.cssText="opacity: 1; display: inline-block;background: rgba(0,0,0,0.65); border-radius: 10px; padding: 10px; width: 250px; text-align: center; position: absolute; z-index: 1000;";g.appendChild(j);f.span=j}i=document.createElement("canvas");document.body.appendChild(i);i.id=a.id;i.style.cssText="opacity: 1; position: absolute; z-index: 1000;";g.appendChild(i);document.body.appendChild(g)}if(window.innerWidth&&window.innerHeight)var k=window.innerWidth,
l=window.innerHeight;else if(document.body&&document.body.offsetWidth)k=document.body.offsetWidth,l=document.body.offsetHeight;else if(document.compatMode==="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth)k=document.documentElement.offsetWidth,l=document.documentElement.offsetHeight;var h=(a.lineHeight+20)*2+a.radius;k-=h;l-=h;i.width=h;i.height=h;i.style.left=k/2+"px";i.style.top=l/2+"px";if(a.message)f.span.style.left=(k+h)/2-f.span.offsetWidth/2+"px",f.span.style.top=
l/2+h-10+"px";var f=this,o=0,m=0,q=a.bars,s=a.radius,n=i.getContext("2d");n.globalCompositeOperation="lighter";n.shadowOffsetX=1;n.shadowOffsetY=1;n.shadowBlur=1;n.shadowColor="rgba(0, 0, 0, 0.5)";this.message=function(b){o||this.start();a.message=b;b.substr(-3)==="..."?(a.message=b.substr(0,b.length-3),a.messageAnimate=[".&nbsp;&nbsp;","..&nbsp;","..."].reverse()):a.messageAnimate=!1;f.span.innerHTML=a.message+(a.messageAnimate[0]||"")};this.stop=function(){o&&(window.clearInterval(o),o=0);if(i&&
i.style)i.parentNode.style.opacity=0,window.setTimeout(function(){i.parentNode.style.display="none";n.clearRect(0,0,h,h)},500)};this.start=function(){if(!o)i.parentNode.style.top=document.body.scrollTop+"px",i.parentNode.style.opacity=1,i.parentNode.style.display="block",i.style.left=k/2+"px",i.style.top=l/2+"px",a.delay||d(),o=window.setInterval(d,30),a.message&&this.message(a.message)};this.start(3E4);return this}}})(widgets);typeof widgets==="undefined"&&(widgets={});
(function(a){storage=typeof localStorage!=="undefined"?0:1;a.setItem=function(a,c,e){if(storage===0)localStorage.setItem(a,c);else{if(e){var d=new Date;d.setTime(d.getTime()+e*864E5);e="; expires="+d.toGMTString()}else e="";document.cookie=a+"="+c+e+"; path=/"}};a.getItem=function(a){if(storage===0)return localStorage.getItem(a);else{var c=document.cookie.split(";");a+="=";for(var e=0,d=c.length;e<d;e++){for(var f=c[e];f.charAt(0)===" ";)f=f.substring(1,f.length);if(f.indexOf(a)===0)return f.substring(a.length,
f.length)}}};a.removeItem=function(b){storage===0?localStorage.removeItem(b):a.setItem(b,"",-1)};a.clear=function(){if(storage===0)localStorage.clear();else for(var a=document.cookie.split(";"),c=0,e=a.length;c<e;c++){var d=a[c],f=d.indexOf("="),d=f===-1?d:d.substr(0,f);document.cookie=d+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}}})(widgets.Cookie={});window.widgets||(widgets={});
widgets.Socialize=function(){(function(){var a=document.getElementById("facebook-button");if(a){var b=document.createElement("iframe");b.src="http://www.facebook.com/plugins/like.php?href&send=false&layout=button_count&width=450&show_faces=true&action=like&colorscheme=light&font=arial&height=21&appId=127507607001";b.style.cssText="border:none; overflow:hidden; width:450px; height:21px";b.allowTransparency=!0;b.scrolling="no";b.frameborder=0;a.appendChild(b)}})();(function(){var a=document.getElementById("twitter-button");
if(a){var b=document.createElement("a");b.innerHTML="Tweet";b.href="http://twitter.com/share";b.className="twitter-share-button";b.setAttribute("data-count","horizontal");b.setAttribute("data-via","mudcube");a.appendChild(b);a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src="http://platform.twitter.com/widgets.js";b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}})();(function(){var a=document.getElementById("google-plus-button");if(a){a.appendChild(document.createElement("g:plusone"));
a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src="https://apis.google.com/js/plusone.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}})()};typeof widgets=="undefined"&&(widgets={});
widgets.Uploader=function(a){a||(a={});var b=this;this.callback=a.callback;this.maxFiles=((this.singleFile=a.singleFile||!1)?1:a.max)||Infinity;this.fileCollection={};this.hasFileReader=window.FileReader?!0:!1;this.acceptedFormats=a.formats||{"image/jpg":!0,"image/jpeg":!0,"image/gif":!0,"image/png":!0};this.uploadCollection=function(a){var c=[],d=uploader.fileCollection,e;for(e in d)c.push(d[e]);b.handleFiles(c,{upload:!0,callback:a})};this.preview=function(a){var d=a.name,e=function(a){b.fileCollection[d].src=
a.target.result;b.fileCollection[d].preview=!0;return c()},j=new FileReader;j.addEventListener?j.addEventListener("loadend",e,!1):j.onloadend=e;j.readAsDataURL(a)};this.upload=function(a){var d=a.name;if(b.hasFileReader){var e=function(a){switch(a.target.error.code){case a.target.error.NOT_FOUND_ERR:b.status="File not found.";break;case a.target.error.NOT_READABLE_ERR:b.status="File not readable.";break;case a.target.error.ABORT_ERR:b.status="Upload has been aborted.";break;default:b.status="Read error."}},
j=function(a){if(a.lengthComputable)b.status=Math.round(a.loaded*100/a.total)},k=function(){var e=new XMLHttpRequest;e.onreadystatechange=function(a){if(e.readyState==4&&a.srcElement.responseText=="success")return b.fileCollection[d].uploaded=!0,c()};if(e.sendAsBinary!=null){e.open("POST","?upload=true",!0);var i="--xxxxxxxxx\r\n";i+="Content-Disposition: form-data; name='upload'; filename='"+a.name+"'\r\n";i+="Content-Type: application/octet-stream\r\n\r\n";i+=l.result+"\r\n";i+="--xxxxxxxxx\r\n";
e.setRequestHeader("content-type","multipart/form-data; boundary="+boundary);e.sendAsBinary(i)}else e.open("POST","?upload=true&base64=true",!0),e.setRequestHeader("X-FILENAME",a.name),e.setRequestHeader("X-FILESIZE",a.size),e.setRequestHeader("X-FILETYPE",a.type),e.setRequestHeader("X-META",JSON.stringify(a.meta||{})),e.send(window.btoa(l.result))},l=new FileReader;l.addEventListener?(l.addEventListener("loadend",k,!1),l.addEventListener("error",e,!1),l.addEventListener("progress",j,!1)):(l.onloadend=
k,l.onerror=e,l.onprogress=j);l.readAsBinaryString(a)}else{var h=new XMLHttpRequest;h.onreadystatechange=function(a){if(h.readyState==4&&a.srcElement.responseText=="success")return b.fileCollection[d].uploaded=!0,c()};h.open("POST","?upload=true",!0);h.setRequestHeader("X-FILENAME",a.name);h.setRequestHeader("X-FILESIZE",a.size);h.setRequestHeader("X-FILETYPE",a.type);h.setRequestHeader("X-META",JSON.stringify(a.meta||{}));h.send(a)}};var c=void 0;this.handleFiles=function(a,d){var e=0,j=a.length;
d||(d={});if(j>0&&b.singleFile&&d.upload!=!0)b.fileCollection={};(c=function(){var k=a[e],l={status:b.status,current:e,length:j};if(++e>b.maxFiles||!k)b.callback(l,b.fileCollection,j-1,d.event);else{b.callback(l);l=k.name;if(b.fileCollection[l])if(d.upload){if(b.fileCollection[l].uploaded)return c()}else if(b.fileCollection[l].preview)return c();b.fileCollection[l]=k;(l=k.type)||(l="text/"+k.fileName.substr(k.fileName.lastIndexOf(".")+1));if(!b.acceptedFormats[l])return c();if((k.fileSize||k.size)==
0)return c();if(d.upload)b.upload(k);else if(d.preview&&b.hasFileReader)b.preview(k);else return c()}})()};var e=document.createElement("form");e.action="#";e.method="post";e.enctype="multipart/form-data";e.style.cssText="z-index: 10000; position: absolute; left: 0; top: 0; display: none;";e.addEventListener("dragenter",function(a){Event.preventDefault(a);Event.stopPropagation(a);e.style.background="rgba(255,0,0,0.2)";return!1},!1);e.addEventListener("dragover",function(a){Event.preventDefault(a);
Event.stopPropagation(a);return!1},!1);e.addEventListener("drop",function(a){Event.preventDefault(a);Event.stopPropagation(a);e.style.display="none";e.style.background="none";a.dataTransfer&&a.dataTransfer.files&&b.handleFiles(a.dataTransfer.files,{preview:!0,event:a})},!1);e.addEventListener("dragleave",function(a){Event.preventDefault(a);Event.stopPropagation(a);window.setTimeout(function(){e.style.display="none";e.style.background="none"},100)},!1);var d=document.createElement("input");d.type=
"file";d.name="files[]";if(!this.singleFile&&this.maxFiles>1)d.multiple="multiple";d.style.cssText="position: absolute; opacity: 0;";d.addEventListener("change",function(a){d.files&&d.files[0]?b.handleFiles(d.files,{preview:!0,event:a}):d.value&&console.log(d.value)},!1);d.addEventListener("click",function(a){Event.preventDefault(a);Event.stopPropagation(a)},!1);e.appendChild(d);a=function(){if(!window.innerWidth&&document.body&&document.body.offsetWidth)window.innerWidth=document.body.offsetWidth,
window.innerHeight=document.body.offsetHeight;if(window.innerWidth&&window.innerHeight)e.style.width=window.innerWidth+"px",e.style.height=window.innerHeight+"px"};a();window.addEventListener("dragenter",function(){e.style.display="block"},!1);window.addEventListener("resize",a,!1);document.body.appendChild(e);return this};
(function(a){var b=String.fromCharCode,c;a:{try{document.createElement("$")}catch(e){c=e;break a}c=void 0}a.btoa||(a.btoa=function(a){for(var b,e,i,j,k,l,h=0,o=a.length,m=Math.max,q="";h<o;){b=a.charCodeAt(h++)||0;e=a.charCodeAt(h++)||0;l=a.charCodeAt(h++)||0;if(m(b,e,l)>255)throw c;i=b>>2&63;b=(b&3)<<4|e>>4&15;j=(e&15)<<2|l>>6&3;k=l&63;e?l||(k=64):j=k=64;q+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(i)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(j)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(k)}return q});a.atob||(a.atob=function(a){var a=a.replace(/=+$/,""),e,g,i,j,k=0,l=a.length,h=[];if(l%4===1)throw c;for(;k<l;)e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),
j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)),e=(e&63)<<2|g>>4&3,g=(g&15)<<4|i>>2&15,i=(i&3)<<6|j&63,h.push(b(e)),g&&h.push(b(g)),i&&h.push(b(i));return h.join("")})})(this);
var BlobBuilder=BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||function(a){var b=function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},c=function(){this.data=[]},e=function(a,b,c){this.data=a;this.size=a.length;this.type=b;this.encoding=c},d=c.prototype,f=e.prototype,g=a.FileReaderSync,i=function(a){this.code=this[this.name=a]},j="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),
k=j.length,l=a.URL||a.webkitURL||a,h=l,o=a.btoa,m=a.atob,q=!1,s=a.ArrayBuffer,n=a.Uint8Array;for(c.fake=f.fake=!0;k--;)i.prototype[j[k]]=k+1;try{n&&function(a){q=!a}.apply(0,new n(1))}catch(x){}if(!l.createObjectURL)h=a.URL={};h.createObjectURL=function(a){var b=a.type;b===null&&(b="application/octet-stream");if(a instanceof e){b="data:"+b;if(a.encoding==="base64")return b+";base64,"+a.data;else if(a.encoding==="URI")return b+","+decodeURIComponent(a.data);return o?b+";base64,"+o(a.data):b+","+encodeURIComponent(a.data)}else if(real_create_object_url)return real_create_object_url.call(l,
a)};h.revokeObjectURL=function(a){a.substring(0,5)!=="data:"&&real_revoke_object_url&&real_revoke_object_url.call(l,a)};d.append=function(a){var c=this.data;if(n&&a instanceof s)if(q)c.push(String.fromCharCode.apply(String,new n(a)));else for(var c="",a=new n(a),d=0,f=a.length;d<f;d++)c+=String.fromCharCode(a[d]);else if(b(a)==="Blob"||b(a)==="File")if(g)d=new g,c.push(d.readAsBinaryString(a));else throw new i("NOT_READABLE_ERR");else a instanceof e?a.encoding==="base64"&&m?c.push(m(a.data)):a.encoding===
"URI"?c.push(decodeURIComponent(a.data)):a.encoding==="raw"&&c.push(a.data):(typeof a!=="string"&&(a+=""),c.push(unescape(encodeURIComponent(a))))};d.getBlob=function(a){arguments.length||(a=null);return new e(this.data.join(""),a,"raw")};d.toString=function(){return"[object BlobBuilder]"};f.slice=function(a,b,c){var d=arguments.length;d<3&&(c=null);return new e(this.data.slice(a,d>1?b:this.data.length),c,this.encoding)};f.toString=function(){return"[object Blob]"};return c}(self),DOMElement={extend:function(a,
b){if(!document[a])if(typeof HTMLElement!=="undefined")HTMLElement.prototype[a]=b;else{var c=document.createElement;document.createElement=function(e){e=c(e);e[a]=b;return e};var e=document.getElementById;document.getElementById=function(c){var d=e(c);if(d)return d[a]=b,d;else console.log("element '"+c+"' does not exist.")};var d=document.getElementsByTagName;document.getElementsByTagName=function(c){for(var c=d(c),e=0;e<c.length;e++)c[e][a]=b;return c};document[a]=b}}},getElementsByClassName=function(a,
b){document.evaluate?(alert(10),getElementsByClassName=function(a,b,d){for(var b=b||"*",d=d||document,f=a.split(" "),g="",i=document.documentElement.namespaceURI==="http://www.w3.org/1999/xhtml"?"http://www.w3.org/1999/xhtml":null,a=[],j,k=0,l=f.length;k<l;k+=1)g+="[contains(concat(' ', @class, ' '), ' "+f[k]+" ')]";try{j=document.evaluate(".//"+b+g,d,i,0,null)}catch(h){j=document.evaluate(".//"+b+g,d,null,0,null)}for(;b=j.iterateNext();)a.push(b);return a}):getElementsByClassName=function(a,b,d){var b=
b||"*",d=d||document,f=a.split(" "),a=[],b=b==="*"&&d.all?d.all:d.getElementsByTagName(b),d=[],g;g=0;for(var i=f.length;g<i;g+=1)a.push(RegExp("(^|\\s)"+f[g]+"(\\s|$)"));for(var i=0,j=b.length;i<j;i+=1){f=b[i];g=!1;for(var k=0,l=a.length;k<l;k+=1)if(g=a[k].test(f.className),!g)break;g&&d.push(f)}return d};return getElementsByClassName(a,b,this)};DOMElement.extend("getElementsByClassName",getElementsByClassName);
var BlobBuilder=BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder,saveAs=saveAs||function(a){var b=a.document,c=a.URL||a.webkitURL||a,e=b.createElementNS("http://www.w3.org/1999/xhtml","a"),d="download"in e,f=function(c){var d=b.createEvent("MouseEvents");d.initMouseEvent("click",!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null);return c.dispatchEvent(d)},g=a.webkitRequestFileSystem,i=a.requestFileSystem||g||a.mozRequestFileSystem,j=function(b){(a.setImmediate||a.setTimeout)(function(){throw b;},0)},k=
0,l=[],h=function(a,b,c){for(var b=[].concat(b),d=b.length;d--;){var e=a["on"+b[d]];if(typeof e==="function")try{e.call(a,c||a)}catch(f){j(f)}}},o=function(b,c){var j=this,m=b.type,o=!1,v,z,J=function(){var c=(a.URL||a.webkitURL||a).createObjectURL(b);l.push(c);return c},u=function(){h(j,"writestart progress write writeend".split(" "))},r=function(){if(o||!v)v=J(b);z.location.href=v;j.readyState=j.DONE;u()},w=function(a){return function(){if(j.readyState!==j.DONE)return a.apply(this,arguments)}},
K={create:!0,exclusive:!1},E;j.readyState=j.INIT;c||(c="download");if(d&&(v=J(b),e.href=v,e.download=c,f(e))){j.readyState=j.DONE;u();return}a.chrome&&m&&m!=="application/octet-stream"&&(E=b.slice||b.webkitSlice,b=E.call(b,0,b.size,"application/octet-stream"),o=!0);g&&c!=="download"&&(c+=".download");z=m==="application/octet-stream"||g?a:a.open();i?(k+=b.size,i(a.TEMPORARY,k,w(function(a){a.root.getDirectory("saved",K,w(function(a){var d=function(){a.getFile(c,K,w(function(a){a.createWriter(w(function(c){c.onwriteend=
function(b){z.location.href=a.toURL();l.push(a);j.readyState=j.DONE;h(j,"writeend",b)};c.onerror=function(){var a=c.error;a.code!==a.ABORT_ERR&&r()};"writestart progress write abort".split(" ").forEach(function(a){c["on"+a]=j["on"+a]});c.write(b);j.abort=function(){c.abort();j.readyState=j.DONE};j.readyState=j.WRITING}),r)}),r)};a.getFile(c,{create:!1},w(function(a){a.remove();d()}),w(function(a){a.code===a.NOT_FOUND_ERR?d():r()}))}),r)}),r)):r()},m=o.prototype;m.abort=function(){this.readyState=
this.DONE;h(this,"abort")};m.readyState=m.INIT=0;m.WRITING=1;m.DONE=2;m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null;a.addEventListener("unload",function(){for(var a=l.length;a--;){var b=l[a];typeof b==="string"?c.revokeObjectURL(b):b.remove()}l.length=0},!1);return function(a,b){return new o(a,b)}}(self);
(function(){Downloadify=window.Downloadify={queue:{},uid:(new Date).getTime(),getTextForSave:function(a){return(a=Downloadify.queue[a])?a.getData():""},getFileNameForSave:function(a){return(a=Downloadify.queue[a])?a.getFilename():""},getDataTypeForSave:function(a){return(a=Downloadify.queue[a])?a.getDataType():""},saveComplete:function(a){(a=Downloadify.queue[a])&&a.complete();return!0},saveCancel:function(a){(a=Downloadify.queue[a])&&a.cancel();return!0},saveError:function(a){(a=Downloadify.queue[a])&&
a.error();return!0},addToQueue:function(a){Downloadify.queue[a.queue_name]=a},getUID:function(a){if(a.id=="")a.id="downloadify_"+Downloadify.uid++;return a.id}};Downloadify.create=function(a,b){var c=typeof a=="string"?document.getElementById(a):a;return new Downloadify.Container(c,b)};Downloadify.Container=function(a,b){var c=this;c.el=a;c.enabled=!0;c.dataCallback=null;c.filenameCallback=null;c.data=null;c.filename=null;c.enable=function(){document.getElementById(c.flashContainer.id).setEnabled(!0);
c.enabled=!0};c.disable=function(){document.getElementById(c.flashContainer.id).setEnabled(!1);c.enabled=!1};c.getData=function(){return!c.enabled?"":c.dataCallback?c.dataCallback():c.data?c.data:""};c.getFilename=function(){return c.filenameCallback?c.filenameCallback():c.filename?c.filename:""};c.getDataType=function(){return c.options.dataType?c.options.dataType:"string"};c.complete=function(){if(typeof c.options.onComplete==="function")c.options.onComplete()};c.cancel=function(){if(typeof c.options.onCancel===
"function")c.options.onCancel()};c.error=function(){if(typeof c.options.onError==="function")c.options.onError()};(function(){c.options=b;if(!c.options.append)c.el.innerHTML="";c.flashContainer=document.createElement("span");c.el.appendChild(c.flashContainer);c.queue_name=Downloadify.getUID(c.flashContainer);if(typeof c.options.filename==="function")c.filenameCallback=c.options.filename;else if(c.options.filename)c.filename=c.options.filename;if(typeof c.options.data==="function")c.dataCallback=c.options.data;
else if(c.options.data)c.data=c.options.data;var a={queue_name:c.queue_name,width:c.options.width,height:c.options.height},d={allowScriptAccess:"always"},f={id:c.flashContainer.id,name:c.flashContainer.id};if(c.options.enabled===!1)c.enabled=!1;if(c.options.transparent===!0)d.wmode="transparent";if(c.options.downloadImage)a.downloadImage=c.options.downloadImage;swfobject.embedSWF(c.options.swf,c.flashContainer.id,c.options.width,c.options.height,"10",null,a,d,f);Downloadify.addToQueue(c)})()};Downloadify.defaultOptions=
{swf:"media/downloadify.swf",downloadImage:"images/download.png",width:100,height:30,transparent:!0,append:!1,dataType:"string"}})();typeof jQuery!="undefined"&&function(a){a.fn.downloadify=function(b){return this.each(function(){b=a.extend({},Downloadify.defaultOptions,b);var c=Downloadify.create(this,b);a(this).data("Downloadify",c)})}}(jQuery);
typeof MooTools!="undefined"&&Element.implement({downloadify:function(a){a=$merge(Downloadify.defaultOptions,a);return this.store("Downloadify",Downloadify.create(this,a))}});
var swfobject=function(){function a(){if(!F){try{var a=r.getElementsByTagName("body")[0].appendChild(r.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}F=!0;for(var a=E.length,c=0;c<a;c++)E[c]()}}function b(a){F?a():E[E.length]=a}function c(a){if(typeof u.addEventListener!=t)u.addEventListener("load",a,!1);else if(typeof r.addEventListener!=t)r.addEventListener("load",a,!1);else if(typeof u.attachEvent!=t)m(u,"onload",a);else if(typeof u.onload=="function"){var b=u.onload;u.onload=
function(){b();a()}}else u.onload=a}function e(){var a=r.getElementsByTagName("body")[0],b=r.createElement(v);b.setAttribute("type",z);var c=a.appendChild(b);if(c){var e=0;(function(){if(typeof c.GetVariable!=t){var f=c.GetVariable("$version");if(f)f=f.split(" ")[1].split(","),p.pv=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)]}else if(e<10){e++;setTimeout(arguments.callee,10);return}a.removeChild(b);c=null;d()})()}else d()}function d(){var a=B.length;if(a>0)for(var b=0;b<a;b++){var c=B[b].id,
d=B[b].callbackFn,e={success:!1,id:c};if(p.pv[0]>0){var h=o(c);if(h)if(q(B[b].swfVersion)&&!(p.wk&&p.wk<312)){if(n(c,!0),d)e.success=!0,e.ref=f(c),d(e)}else if(B[b].expressInstall&&g()){e={};e.data=B[b].expressInstall;e.width=h.getAttribute("width")||"0";e.height=h.getAttribute("height")||"0";if(h.getAttribute("class"))e.styleclass=h.getAttribute("class");if(h.getAttribute("align"))e.align=h.getAttribute("align");for(var k={},h=h.getElementsByTagName("param"),l=h.length,m=0;m<l;m++)h[m].getAttribute("name").toLowerCase()!=
"movie"&&(k[h[m].getAttribute("name")]=h[m].getAttribute("value"));i(e,k,c,d)}else j(h),d&&d(e)}else if(n(c,!0),d){if((c=f(c))&&typeof c.SetVariable!=t)e.success=!0,e.ref=c;d(e)}}}function f(a){var b=null;if((a=o(a))&&a.nodeName=="OBJECT")typeof a.SetVariable!=t?b=a:(a=a.getElementsByTagName(v)[0])&&(b=a);return b}function g(){return!O&&q("6.0.65")&&(p.win||p.mac)&&!(p.wk&&p.wk<312)}function i(a,b,c,d){O=!0;P=d||null;R={success:!1,id:c};var e=o(c);if(e){e.nodeName=="OBJECT"?(L=k(e),N=null):(L=e,N=
c);a.id=J;if(typeof a.width==t||!/%$/.test(a.width)&&parseInt(a.width,10)<310)a.width="310";if(typeof a.height==t||!/%$/.test(a.height)&&parseInt(a.height,10)<137)a.height="137";r.title=r.title.slice(0,47)+" - Flash Player Installation";d=p.ie&&p.win?"ActiveX":"PlugIn";d="MMredirectURL="+u.location.toString().replace(/&/g,"%26")+"&MMplayerType="+d+"&MMdoctitle="+r.title;typeof b.flashvars!=t?b.flashvars+="&"+d:b.flashvars=d;if(p.ie&&p.win&&e.readyState!=4)d=r.createElement("div"),c+="SWFObjectNew",
d.setAttribute("id",c),e.parentNode.insertBefore(d,e),e.style.display="none",function(){e.readyState==4?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}();l(a,b,c)}}function j(a){if(p.ie&&p.win&&a.readyState!=4){var b=r.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(k(a),b);a.style.display="none";(function(){a.readyState==4?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(k(a),a)}function k(a){var b=r.createElement("div");
if(p.win&&p.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(v)[0])if(a=a.childNodes)for(var c=a.length,d=0;d<c;d++)!(a[d].nodeType==1&&a[d].nodeName=="PARAM")&&a[d].nodeType!=8&&b.appendChild(a[d].cloneNode(!0));return b}function l(a,b,c){var d,e=o(c);if(p.wk&&p.wk<312)return d;if(e){if(typeof a.id==t)a.id=c;if(p.ie&&p.win){var f="",g;for(g in a)if(a[g]!=Object.prototype[g])g.toLowerCase()=="data"?b.movie=a[g]:g.toLowerCase()=="styleclass"?f+=' class="'+a[g]+'"':g.toLowerCase()!="classid"&&
(f+=" "+g+'="'+a[g]+'"');g="";for(var i in b)b[i]!=Object.prototype[i]&&(g+='<param name="'+i+'" value="'+b[i]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+g+"</object>";M[M.length]=a.id;d=o(a.id)}else{i=r.createElement(v);i.setAttribute("type",z);for(var h in a)a[h]!=Object.prototype[h]&&(h.toLowerCase()=="styleclass"?i.setAttribute("class",a[h]):h.toLowerCase()!="classid"&&i.setAttribute(h,a[h]));for(f in b)b[f]!=Object.prototype[f]&&f.toLowerCase()!=
"movie"&&(a=i,g=f,h=b[f],c=r.createElement("param"),c.setAttribute("name",g),c.setAttribute("value",h),a.appendChild(c));e.parentNode.replaceChild(i,e);d=i}}return d}function h(a){var b=o(a);if(b&&b.nodeName=="OBJECT")p.ie&&p.win?(b.style.display="none",function(){if(b.readyState==4){var c=o(a);if(c){for(var d in c)typeof c[d]=="function"&&(c[d]=null);c.parentNode.removeChild(c)}}else setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b)}function o(a){var b=null;try{b=r.getElementById(a)}catch(c){}return b}
function m(a,b,c){a.attachEvent(b,c);G[G.length]=[a,b,c]}function q(a){var b=p.pv,a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function s(a,b,c,d){if(!p.ie||!p.mac){var e=r.getElementsByTagName("head")[0];if(e){c=c&&typeof c=="string"?c:"screen";d&&(Q=y=null);if(!y||Q!=c)d=r.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("media",c),y=e.appendChild(d),
p.ie&&p.win&&typeof r.styleSheets!=t&&r.styleSheets.length>0&&(y=r.styleSheets[r.styleSheets.length-1]),Q=c;p.ie&&p.win?y&&typeof y.addRule==v&&y.addRule(a,b):y&&typeof r.createTextNode!=t&&y.appendChild(r.createTextNode(a+" {"+b+"}"))}}}function n(a,b){if(T){var c=b?"visible":"hidden";F&&o(a)?o(a).style.visibility=c:s("#"+a,"visibility:"+c)}}function x(a){return/[\\\"<>\.;]/.exec(a)!=null&&typeof encodeURIComponent!=t?encodeURIComponent(a):a}var t="undefined",v="object",z="application/x-shockwave-flash",
J="SWFObjectExprInst",u=window,r=document,w=navigator,K=!1,E=[function(){K?e():d()}],B=[],M=[],G=[],L,N,P,R,F=!1,O=!1,y,Q,T=!0,p=function(){var a=typeof r.getElementById!=t&&typeof r.getElementsByTagName!=t&&typeof r.createElement!=t,b=w.userAgent.toLowerCase(),c=w.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,e=!+"\u000b1",f=[0,0,0],g=null;if(typeof w.plugins!=t&&typeof w.plugins["Shockwave Flash"]==
v){if((g=w.plugins["Shockwave Flash"].description)&&!(typeof w.mimeTypes!=t&&w.mimeTypes[z]&&!w.mimeTypes[z].enabledPlugin))K=!0,e=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),f[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),f[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),f[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}else if(typeof u.ActiveXObject!=t)try{var i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(i&&(g=i.GetVariable("$version")))e=!0,g=g.split(" ")[1].split(","),
f=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]}catch(h){}return{w3:a,pv:f,wk:b,ie:e,win:d,mac:c}}();(function(){p.w3&&((typeof r.readyState!=t&&r.readyState=="complete"||typeof r.readyState==t&&(r.getElementsByTagName("body")[0]||r.body))&&a(),F||(typeof r.addEventListener!=t&&r.addEventListener("DOMContentLoaded",a,!1),p.ie&&p.win&&(r.attachEvent("onreadystatechange",function(){r.readyState=="complete"&&(r.detachEvent("onreadystatechange",arguments.callee),a())}),u==top&&function(){if(!F){try{r.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,
0);return}a()}}()),p.wk&&function(){F||(/loaded|complete/.test(r.readyState)?a():setTimeout(arguments.callee,0))}(),c(a)))})();(function(){p.ie&&p.win&&window.attachEvent("onunload",function(){for(var a=G.length,b=0;b<a;b++)G[b][0].detachEvent(G[b][1],G[b][2]);a=M.length;for(b=0;b<a;b++)h(M[b]);for(var c in p)p[c]=null;p=null;for(var d in swfobject)swfobject[d]=null;swfobject=null})})();return{registerObject:function(a,b,c,d){if(p.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=c;e.callbackFn=
d;B[B.length]=e;n(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(p.w3)return f(a)},embedSWF:function(a,c,d,e,f,h,j,k,m,o){var r={success:!1,id:c};p.w3&&!(p.wk&&p.wk<312)&&a&&c&&d&&e&&f?(n(c,!1),b(function(){d+="";e+="";var b={};if(m&&typeof m===v)for(var p in m)b[p]=m[p];b.data=a;b.width=d;b.height=e;p={};if(k&&typeof k===v)for(var s in k)p[s]=k[s];if(j&&typeof j===v)for(var u in j)typeof p.flashvars!=t?p.flashvars+="&"+u+"="+j[u]:p.flashvars=u+"="+j[u];if(q(f))s=l(b,p,c),b.id==
c&&n(c,!0),r.success=!0,r.ref=s;else if(h&&g()){b.data=h;i(b,p,c,o);return}else n(c,!0);o&&o(r)})):o&&o(r)},switchOffAutoHideShow:function(){T=!1},ua:p,getFlashPlayerVersion:function(){return{major:p.pv[0],minor:p.pv[1],release:p.pv[2]}},hasFlashPlayerVersion:q,createSWF:function(a,b,c){if(p.w3)return l(a,b,c)},showExpressInstall:function(a,b,c,d){p.w3&&g()&&i(a,b,c,d)},removeSWF:function(a){p.w3&&h(a)},createCSS:function(a,b,c,d){p.w3&&s(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=
r.location.search||r.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(a==null)return x(b);for(var b=b.split("&"),c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return x(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(O){var a=o(J);if(a&&L){a.parentNode.replaceChild(L,a);if(N&&(n(N,!0),p.ie&&p.win))L.style.display="block";P&&P(R)}O=!1}}}}();
Event.add(window,"load",function(){function a(a,b){typeof a==="string"&&(a=document.getElementById(a));for(var c in b)window.setTimeout(function(){a.style[c]=b[c]},25)}var b={boxes:"foxybox",parent:"foxy_parent",titleBar:"foxy_title",titleBarContent:"foxy_title_content",close:"close_foxy",toggle:function(c,d){if(typeof this.boxes==="string"){this.boxes=document.getElementsByClassName(this.boxes);this.titleBar=document.getElementById(this.titleBar);this.titleBarContent=document.getElementById(this.titleBarContent);
this.parent=document.getElementById(this.parent);this.close=document.getElementById(this.close);this.parent.onclick=this.close.onclick=function(){b.toggle(c,d)};for(var e=0,j=this.parent.childNodes.length;e<j;e++)Event.add(this.parent.childNodes[e],"click",function(a){Event.stopPropagation(a)})}if(this.parent.className.indexOf("visible")>=0)window.setTimeout(function(){b.parent.style.display="none"},250),this.parent.className=this.parent.className.replace("visible","").trim(),a(this.titleBar,{top:"-80px"}),
a(this.parent,{opacity:"0"});else{e=0;for(j=this.boxes.length;e<j;e++)this.boxes[e].style.display="none";document.getElementById(d).style.display="block";this.titleBarContent.innerHTML=c;this.parent.className+=" visible";this.parent.style.display="block";a(this.titleBar,{top:"0px"});a(this.parent,{opacity:"1"})}}},c=document.getElementById("createLink");if(c)c.onclick=function(a){b.toggle("Create","createMenu");Event.stopPropagation(a);return!1};var c=document.getElementById("loginForm"),e=document.getElementById("signupForm");
if(document.body.className.indexOf("authenticated")===-1&&e&&c&&(c.onclick=e.onclick=function(a){Event.stopPropagation(a)},document.getElementById("accountNav")))for(var c=document.getElementById("accountNav").getElementsByTagName("a"),e=0,d=c.length;e<d;e++)c[e].onclick=function(){for(var a=this.firstChild.nodeValue,a=a==="Account"?"Login":a,c=a.replace(" ","").toLowerCase()+"Form",d=document.getElementById(c).getElementsByTagName("input"),e=0,k=d.length;e<k;e++)if(d[e].type==="text"){window.setTimeout(function(){d[e].focus()},
25);break}b.toggle(a,c);return!1}});typeof ColRD==="undefined"&&(ColRD={});ColRD.doSubmit=function(){var a=document.getElementById("creatorSubmit");if(a.tagInput)a.tagInput.value=$vars.type;a.submit()};var parseQuery=function(a,b){b=b||{};if(a)for(var a=a.substr(1).split("&"),c=0;c<a.length;c++){var e=a[c].split("=");b[e[0]]=e[1]}return b};if(typeof $vars==="undefined"){var config=parseQuery(window.location.hash,{type:"palette"});$vars=config}
window.location.protocol==="chrome-extension:"?($vars.host="chrome-fileType://omgbafcldopofpgkdghcgmibmohidamo/",$vars.src=$vars.host,$vars.jsDir=$vars.host+"js/"):($vars.host=window.location.host==="localhost"?"http://localhost/colrd.com/":window.location.host==="127.0.0.1"?"http://127.0.0.1/colrd/colrd.com/":"http://colrd.com/",$vars.src=$vars.host+"software/creator/",$vars.jsDir=$vars.host+"software/js/");typeof creator==="undefined"&&(creator={});
creator.doPreview=function(){var a=creator.preview_ctx,b=a.canvas,c=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight);b.style.opacity=1;b.style.width=(b.width=window.innerWidth)+"px";b.style.height=(b.height=c)+"px";b.style.zIndex=100;colorPalette.drawToCanvas(a)};
creator.drawBackground=function(){if(!creator.texture)creator.texture=new Image,creator.texture.onload=function(){var a=this.width,b=this.height,c=document.createElement("canvas"),e=c.getContext("2d");c.width=a;c.height=b;e.drawImage(this,0,0,this.width,this.height,0,0,a,b);for(var a=e.getImageData(0,0,a,b),b=a.data,d=a.width,f=a.height,g=0;g<f;g++)for(var i=0;i<d;i++){var j=g*4*d+i*4,k=0.3*b[j]+0.59*b[j+1]+0.11*b[j+2];b[j]=k;b[j+1]=k;b[j+2]=k}e.putImageData(a,0,0);this.onload=function(){};this.src=
c.toDataURL()},creator.texture.src="http://localhost/mudcu.be/labs/Background-Generator/textures/texturise/concrete/concrete_004.jpg",creator.texture.src="http://localhost/mudcu.be/labs/Background-Generator/textures/texturise/wood/wood_009.jpg";colorPalette.drawTexture=colorPalette.drawTexture?!1:!0;colorPalette.redraw(!0)};
creator.save=function(a){var b=function(a,b,c){c||(c=b);a.className=(" "+a.className+" ").replace(" "+b+" "," "+c+" ").trim()};creator.saveIsOpen=a;if(document.getElementById("creatorSubmit")){var c=document.getElementById("creatorSubmit");c.style.display=a?"block":"none";c.style.opacity=a?1:0;c.style.zIndex=a?10:-1;if(c.data)c.data.value=colorPalette.toString()}a===!1?window.setTimeout(function(){b(document.getElementById("palette"),"shadow","")},500):b(document.getElementById("palette"),"shadow");
if(window.colorPalette&&colorPalette.max==1){var e=colorPicker.RGB.values,a="#"+Color.Space(e,"RGB>HEX>STRING").toUpperCase(),c=document.getElementById("preview"),d=document.createElement("input"),e=creator.isW3Contrast(e);d.setAttribute("type","text");d.style.cssText="border: 2px solid rgba(255,255,255,0.5); width: 270px; background: "+a+"; border-radius: 5px; padding: 5px 7px 6px; margin: 0;";d.style.color=e?"#000":"#fff";d.value=a;removeChildNodes(c);c.appendChild(d)}creator.loader.stop();$vars.type!==
"color"?(creator.fileSaver=new widgets.FileSaver({jsDir:$vars.jsDir+"File/"}),creator.initDialog()):document.getElementById("download").style.cssText="display: none"};
creator.addTag=function(a){var b=document.getElementById("creatorSubmit");if(!b.tagElements)b.tagElements={};var c=b.tagElements,e=b.tagInput.value.split(","),d;for(d in e){var f=e[d].trim();f&&(c[f]=!0)}e=document.getElementById("tags");removeChildNodes(e);f=[];for(d in c){var g=document.createElement("div");f.push(d);g.className="tag";Event.add(g,"click",function(){delete c[this.innerHTML.trim()];this.parentNode.removeChild(this)});var i=document.createElement("span");i.className="tag";g.appendChild(i);
g.appendChild(document.createTextNode(d));e.appendChild(g)}b.tagItems.value=f.join(",");Event.preventDefault(a)};creator.isW3Contrast=function(a){var b=Color.W3Brightness(a,{R:255,G:255,B:255})<100,a=Color.W3Difference(a,{R:255,G:255,B:255})<500;return b&&a};
creator.animateBackground=function(a,b,c){colorPalette.max==1&&(b=2);var e=creator.isW3Contrast(a),d=e?"blackInterface":"whiteInterface";if(b>0){if($vars.type!=="color")document.body.style.cssText=b>1?"-webkit-transition-duration: .4s":"-webkit-transition-duration: 0s";document.body.className=d+(e?" black":" white");document.body.style.background="#"+Color.Space(a,"RGB>HEX>STRING");c&&window.setTimeout(function(){document.body.style.background="";document.body.className=d},b>2?0:300)}else document.body.className=
d;document.body.style.height=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)+"px"};
creator.addColorDrop=function(a){if($vars.type!="color"){if(!creator.addButton)creator.addButton=document.createElement("div"),creator.addButton.className="addButton",document.body.appendChild(creator.addButton);var b=creator.addButton;if(this.paletteHEX){var c=!1,e=Color.Space(this.paletteHEX,"HEX>STRING");b.style.backgroundColor="#"+e}else c=!0,e=Color.Space(colorPicker.RGB.values,"RGB>HEX>STRING");var d=abPos(b).x+16,f=Event.coords(a);Event.dragElement({type:"absolute",event:a,element:b,callback:function(a,
i,j){Event.preventDefault(a);Event.stopPropagation(a);colorPalette.getSelectedPoint(void 0,a,2,colorPalette.points,colorPalette.max);var k=Event.coords(a),l=Color.Space.HEX_RGB(parseInt("0x"+e)),k=f.y-k.y<=30&&!c;if(j==="up"||k){if(b.style.display="none",b.style.top="",!k)colorPicker.RGB.values=Color.Space(e,"STRING>HEX>RGB"),colorPalette.add(a),creator.animateBackground(l,3,!0)}else document.body.style.background||creator.animateBackground(l,2),b.style.backgroundColor="#"+e,b.style.left=Math.max(35,
Math.min(window.innerWidth-70,i.x-d))+"px",b.style.display="block",b.style.opacity!=1&&window.setTimeout(function(){b.style.opacity=1},0)}})}};
creator.fromSearchString=function(a){colorPalette.destroy();if(!a||a.indexOf("dna")==-1)a=ColRD[$vars.type.ucwords()+"Feed"],a=a[Math.round((a.length-1)*Math.random())],a="?dna="+a;a=parseQuery(a).dna.split(",");if($vars.type=="color")colorPalette.add(parseInt("0x"+a[0]),1);else if($vars.type==="gradient")for(var a=Media.Parser.GR_OGR(a),b=0;a[b];){var c=parseInt("0x"+(a[b]||"").replace("0x",""));colorPalette.add(c,parseFloat(a[b+1]),parseFloat(a[b+2]));b+=3}else for(var b=0,e=1;e<a.length;e+=2){var d=
a[e+2]?parseFloat(a[e+1]):1,c=parseInt("0x"+(a[e]||"").replace("0x",""));d-=b;b+=d;colorPalette.add(c,d)}};creator.random=function(){(creator.lastRandom==colorPalette.toString()||window.confirm("Please be aware; you are about to loose your changes. Click 'ok' to start viewing random "+$vars.type+"s."))&&window.setTimeout(function(){creator.fromSearchString();creator.selectLastPoint();creator.lastRandom=colorPalette.toString()},0)};
creator.selectLastPoint=function(){colorPalette.selectedPoint=colorPalette.points.length-1;colorPalette.redraw(!0);colorPicker.RGB.values=colorPalette.getLast();colorPicker.update("RGB")};
creator.initHexElement=function(){var a=document.getElementById("HEX"),b=function(b){var e=b.keyCode,d=a.value.replace(/[^0-9a-f]/ig,"").substr(0,6),d=parseInt("0x"+d);if(b.type=="keydown")if(e==40)d=Math.max(0,d-(b.shiftKey?10:1)),a.value="#"+Color.Space(d,"HEX>STRING");else if(e==38)d=Math.min(16777215,d+(b.shiftKey?10:1)),a.value="#"+Color.Space(d,"HEX>STRING");e=b.type=="change"?"":"hex";colorPicker.RGB.values=Color.Space(d,"HEX>RGB");colorPicker.update("RGB",colorPicker.RGB.values,e);colorPalette.redraw({RGB:!0});
b.keyCode==27&&this.blur()};Event.add(a,"keydown",b);Event.add(a,"keyup",b);Event.add(a,"keypress",b);Event.add(a,"change",b)};
creator.toggleCreatorType=function(){if($vars.type=="color"){var a="Name your Color:",b={max:1,max:1};document.getElementById("addColor").style.display="none";document.getElementById("removeColor").style.display="none";document.getElementById("flip").style.display="none";document.getElementById("HEX").style.borderTopLeftRadius="10px";document.getElementById("palette").style.cssText="display: none; position: static";document.getElementById("creatorSubmit").style.paddingTop="70px"}else if($vars.type==
"palette")a="Name your Palette:",b={min:2,max:30},document.getElementById("creatorSubmit").style.paddingTop="200px",document.getElementById("palette").className="showCanvas";else if($vars.type=="gradient")a="Name your Gradient:",b={min:2,max:30},document.getElementById("creatorSubmit").style.paddingTop="200px",document.getElementById("palette").className="showCanvas";if(document.getElementById("contentType"))document.getElementById("contentType").value=$vars.type;if(document.getElementById("nameColor"))document.getElementById("nameColor").innerHTML=
a;colorPalette=new Color.Palette(b)};
creator.initDialog=function(){var a=document.getElementById("download");a.innerHTML='<span style="float: left; position: relative; top: 25px; left: -15px">Download: ';if($vars.type==="palette"){for(var b=[],c=colorPalette.toString().split(","),e=1;e<c.length;e+=2)b.push(c[e]);b=b.join(",");creator.fileSaver.button({parent:a,id:"downloadify.Illustrator",title:"Illustrator",fileName:"MyPalette",fileType:"ai",format:"fake",getData:function(){window.location.href="http://mudcu.be/sphere/export/?dna="+
b+"&type=ai"}});creator.fileSaver.button({parent:a,id:"downloadify.Photoshop",title:"Photoshop",fileName:"MyPalette",fileType:"aco",format:"fake",getData:function(){window.location.href="http://mudcu.be/sphere/export/?dna="+b+"&type=aco"}});creator.fileSaver.button({parent:a,id:"downloadify.GIMP",title:"GIMP",fileName:"MyPalette",fileType:"gpl",format:"fake",getData:function(){window.location.href="http://mudcu.be/sphere/export/?dna="+b+"&type=gpl"}})}else creator.fileSaver.button({parent:a,id:"downloadify.CSS",
title:"CSS3",fileName:"MyGradient",fileType:"css",format:"fake",getData:function(){var a=Media.Parser.OGR_CSS(colorPalette.toString().split(","));window.location="data:text/plain;base64,"+btoa(a)}}),creator.fileSaver.button({parent:a,id:"downloadify.SVG",title:"SVG",fileName:"MyGradient",fileType:"svg",format:"fake",getData:function(){var a=Media.Parser.OGR_SVG(colorPalette.toString().split(","));window.location="data:text/plain;base64,"+btoa(a)}}),creator.fileSaver.button({parent:a,id:"downloadify.GGR",
title:"GGR",fileName:"MyGradient",fileType:"ggr",format:"string",getData:function(){var a=Media.Parser.OGR_GGR(colorPalette.toString().split(","));return"GIMP Gradient\nName: MyGradient\n"+(a.split("\n").length-1)+"\n"+a}})};
creator.initialize=function(){var a=document.getElementById("addColor");Event.add(a,"mousedown",creator.addColorDrop);creator.toggleCreatorType();$vars.dna?creator.fromSearchString("?dna="+$vars.dna):creator.fromSearchString(window.location.hash);creator.initHexElement();creator.deltaSwatch=new DeltaSwatch;colorPicker=new Color.Picker({callback:function(a,c){$vars.type=="color"?creator.animateBackground(a,2):creator.animateBackground(a,0);var e=Color.Space.RGB_HEX(a),e=Color.Space.HEX_STRING(e),d=
creator.isW3Contrast(a),f=document.getElementById("HEX");if(c!="hex")f.value="#"+e;f=document.getElementById("HEX");f.style.backgroundColor="#"+e;f=document.getElementById("removeColor");f.style.backgroundColor="#"+e;f=document.getElementById("addColor");f.style.backgroundColor="#"+e;f.style.color="#"+(d?"000":"FFF");creator.deltaSwatch.update(e);if(c!="clickControl")colorPalette.points[colorPalette.selectedPoint].color=clone(colorPicker.RGB.values),colorPalette.redraw({RGB:!0})}});colorPicker.build();
colorPicker.RGB.values=colorPalette.getLast();colorPicker.update("RGB");document.body.style.opacity=1;creator.uploader=new widgets.Uploader({callback:function(a,c){var e;if(c){for(e in c);c[e]&&c[e].src&&($vars.type=="gradient"?creator.fromSearchString("?dna="+Media.Parser.GGR_OGR({ggr:window.atob(c[e].src.substr(12))}).toString()):creator.fromSearchString("?dna="+Media.Parser.GPL_OPL({gpl:window.atob(c[e].src.substr(12))}).toString()),creator.selectLastPoint())}},formats:{"text/ggr":!0},singleFile:!1});
creator.onResize();window.setTimeout(function(){colorPalette.redraw(!0)},500)};var colorPicker;
creator.onResize=Event.add(window,"resize",function(){if(window.innerWidth&&window.innerHeight)var a=window.innerWidth,b=window.innerHeight;else if(document.body&&document.body.offsetWidth)a=document.body.offsetWidth,b=document.body.offsetHeight;else if(document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth)a=document.documentElement.offsetWidth,b=document.documentElement.offsetHeight;var c=a/a;windowInnerWidth=a*c;var a=Math.max(document.body.scrollHeight,
document.documentElement.scrollHeight),e=document.getElementById("palette");e.style.margin="auto";e.style.width=c*95+"%";c=$vars.type=="color"?0:199;e=document.getElementById("creatorSubmit");e.style.height=a-35-c+"px";Event.add(e,"submit",function(a){creator.saveIsOpen||Event.preventDefault(a)});document.body.style.height=a+"px";a=document.getElementsByTagName("footer")[0];a.style.opacity=b<800?0:"";a.style.zIndex=b<800?-1:"";var d=document.getElementById("previewCanvas");if(!d)d=document.createElement("canvas"),
d.id="previewCanvas";creator.preview_ctx=d.getContext("2d");document.body.appendChild(d);Event.add(d,"click",function(){window.setTimeout(function(){d.style.zIndex="";colorPalette.redraw()},250);d.style.opacity=""})});
Event.add(window,"load",function(){if(!$vars.dna&&widgets.Cookie.getItem($vars.type)&&$vars.type!=="color")$vars.dna=widgets.Cookie.getItem($vars.type);document.dce=document.createElement;document.createElement=function(a){a=a.toLowerCase();return a==="canvas"&&typeof FlashCanvas!="undefined"?FlashCanvas.initElement(document.dce(a)):document.dce(a)};widgets.Socialize();DOMLoader.link({href:"http://fonts.googleapis.com/css?family=Lato:100,400&v2"});DOMLoader.link({href:"http://fonts.googleapis.com/css?family=Andada"});
creator.initialize();creator.loader&&creator.loader.stop()});Event.add(window,"beforeunload",function(){widgets.Cookie.setItem($vars.type,colorPalette.toString())});Event.add(window,"keyup",function(a){creator.saveIsOpen||(a.shiftKey&&a.keyCode==13?colorPalette.add():a.keyCode==8&&a.shiftKey&&colorPalette.remove())});
